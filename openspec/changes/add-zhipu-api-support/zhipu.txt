# HTTP API è°ƒç”¨

æ™ºè°±AI æä¾›åŸºäº RESTful æ¶æ„çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œé€šè¿‡æ ‡å‡†çš„ HTTP åè®®ä¸æ™ºè°±AI çš„æ¨¡å‹æœåŠ¡è¿›è¡Œäº¤äº’ã€‚æ— è®ºæ‚¨ä½¿ç”¨ä»€ä¹ˆç¼–ç¨‹è¯­è¨€æˆ–å¼€å‘æ¡†æ¶ï¼Œéƒ½å¯ä»¥é€šè¿‡ HTTP è¯·æ±‚æ¥è°ƒç”¨æ™ºè°±AI çš„å„ç§ AI æ¨¡å‹ã€‚

### æ ¸å¿ƒä¼˜åŠ¿

<CardGroup cols={2}>
  <Card title="è·¨å¹³å°å…¼å®¹" icon={<svg style={{maskImage: "url(/resource/icon/globe.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>}>
    æ”¯æŒæ‰€æœ‰æ”¯æŒ HTTP åè®®çš„ç¼–ç¨‹è¯­è¨€å’Œå¹³å°
  </Card>

  <Card title="æ ‡å‡†åè®®" icon={<svg style={{maskImage: "url(/resource/icon/shield-check.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>}>
    åŸºäº RESTful è®¾è®¡ï¼Œéµå¾ª HTTP æ ‡å‡†ï¼Œæ˜“äºç†è§£å’Œä½¿ç”¨
  </Card>

  <Card title="çµæ´»é›†æˆ" icon={<svg style={{maskImage: "url(/resource/icon/puzzle-piece.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>}>
    å¯ä»¥é›†æˆåˆ°ä»»ä½•ç°æœ‰çš„åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿä¸­
  </Card>

  <Card title="å®æ—¶è°ƒç”¨" icon={<svg style={{maskImage: "url(/resource/icon/bolt.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>}>
    æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è°ƒç”¨ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚
  </Card>
</CardGroup>

## è·å– API Key

1. è®¿é—® [æ™ºè°±AI å¼€æ”¾å¹³å°](https://bigmodel.cn)
2. æ³¨å†Œå¹¶ç™»å½•æ‚¨çš„è´¦æˆ·
3. åœ¨ [API Keys](https://bigmodel.cn/usercenter/proj-mgmt/apikeys) ç®¡ç†é¡µé¢åˆ›å»º API Key
4. å¤åˆ¶æ‚¨çš„ API Key ä»¥ä¾›ä½¿ç”¨

## API åŸºç¡€ä¿¡æ¯

### è¯·æ±‚åœ°å€

```
https://open.bigmodel.cn/api/paas/v4/
```

### è¯·æ±‚å¤´è¦æ±‚

<mcreference link="https://bigmodel.cn/dev/api/http-call/http-para" index="0">0</mcreference>

```http  theme={null}
Content-Type: application/json
Authorization: Bearer YOUR_API_KEY
```

### æ”¯æŒçš„é‰´æƒæ–¹å¼

<Tabs>
  <Tab title="API Key é‰´æƒ">
    æœ€ç®€å•çš„é‰´æƒæ–¹å¼ï¼Œç›´æ¥ä½¿ç”¨æ‚¨çš„ API Keyï¼š

    ```bash  theme={null}
    curl --location 'https://open.bigmodel.cn/api/paas/v4/chat/completions' \
    --header 'Authorization: Bearer YOUR_API_KEY' \
    --header 'Content-Type: application/json' \
    --data '{
        "model": "glm-4.6",
        "messages": [
            {
                "role": "user",
                "content": "ä½ å¥½"
            }
        ]
    }'
    ```
  </Tab>

  <Tab title="JWT Token é‰´æƒ">
    ä½¿ç”¨ JWT Token è¿›è¡Œé‰´æƒï¼Œé€‚åˆéœ€è¦æ›´é«˜å®‰å…¨æ€§çš„åœºæ™¯ï¼š
    å®‰è£…ä¾èµ– PyJWT

    ```shell  theme={null}
    pip install PyJWT
    ```

    ```python  theme={null}
    import time
    import jwt

    def generate_token(apikey: str, exp_seconds: int):
        try:
            id, secret = apikey.split(".")
        except Exception as e:
            raise Exception("invalid apikey", e)

        payload = {
            "api_key": id,
            "exp": int(round(time.time() * 1000)) + exp_seconds * 1000,
            "timestamp": int(round(time.time() * 1000)),
        }

        return jwt.encode(
            payload,
            secret,
            algorithm="HS256",
            headers={"alg": "HS256", "sign_type": "SIGN"},
        )

    # ä½¿ç”¨ç”Ÿæˆçš„ token
    token = generate_token("your-api-key", 3600)  # 1 å°æ—¶æœ‰æ•ˆæœŸ
    ```
  </Tab>
</Tabs>

## åŸºç¡€è°ƒç”¨ç¤ºä¾‹

### ç®€å•å¯¹è¯ï¼ˆç«¯åˆ°ç«¯æœ¬åœ°éªŒè¯ï¼‰

```bash
# æœ¬é¡¹ç›® e2e æµ‹è¯•ï¼ˆéœ€å¯ç”¨ key ä¸ base-urlï¼‰ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡åè¿è¡Œï¼š
export E2E_ZHIPU_API_KEY="YOUR_API_KEY"
export E2E_ZHIPU_BASE_URL="https://open.bigmodel.cn/api/paas/v4"
go test ./tests/e2e -run ZhipuE2E -v

# ç›´æ¥ curlï¼ˆä¸æ‰§è¡Œå™¨ä¸€è‡´çš„ OpenAI-compatible æ¥å£ï¼‰
curl --location 'https://open.bigmodel.cn/api/paas/v4/chat/completions' \
  --header 'Authorization: Bearer YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "model": "glm-4.6",
    "messages": [{"role": "user", "content": "è¯·ä»‹ç»ä¸€ä¸‹äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹"}],
    "temperature": 1.0,
    "max_tokens": 1024
  }'
```

### æµå¼å“åº”

```bash  theme={null}
curl --location 'https://open.bigmodel.cn/api/paas/v4/chat/completions' \
--header 'Authorization: Bearer YOUR_API_KEY' \
--header 'Content-Type: application/json' \
--data '{
    "model": "glm-4.6",
    "messages": [
        {
            "role": "user",
            "content": "å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—"
        }
    ],
    "stream": true
}'
```

### å¤šè½®å¯¹è¯

```bash  theme={null}
curl --location 'https://open.bigmodel.cn/api/paas/v4/chat/completions' \
--header 'Authorization: Bearer YOUR_API_KEY' \
--header 'Content-Type: application/json' \
--data '{
    "model": "glm-4.6",
    "messages": [
        {
            "role": "system",
            "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¼–ç¨‹åŠ©æ‰‹"
        },
        {
            "role": "user",
            "content": "ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"
        },
        {
            "role": "assistant",
            "content": "é€’å½’æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œå‡½æ•°è°ƒç”¨è‡ªèº«æ¥è§£å†³é—®é¢˜..."
        },
        {
            "role": "user",
            "content": "èƒ½ç»™æˆ‘ä¸€ä¸ª Python é€’å½’çš„ä¾‹å­å—ï¼Ÿ"
        }
    ]
}'
```

## å¸¸ç”¨ç¼–ç¨‹è¯­è¨€ç¤ºä¾‹

<Tabs>
  <Tab title="Python">
    ```python  theme={null}
    import requests
    import json

    def call_zhipu_api(messages, model="glm-4.6"):
        url = "https://open.bigmodel.cn/api/paas/v4/chat/completions"

        headers = {
            "Authorization": "Bearer YOUR_API_KEY",
            "Content-Type": "application/json"
        }

        data = {
            "model": model,
            "messages": messages,
            "temperature": 1.0
        }

        response = requests.post(url, headers=headers, json=data)

        if response.status_code == 200:
            return response.json()
        else:
            raise Exception(f"APIè°ƒç”¨å¤±è´¥: {response.status_code}, {response.text}")

    # ä½¿ç”¨ç¤ºä¾‹
    messages = [
        {"role": "user", "content": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"}
    ]

    result = call_zhipu_api(messages)
    print(result['choices'][0]['message']['content'])
    ```
  </Tab>

  <Tab title="JavaScript">
    ```javascript  theme={null}
    async function callZhipuAPI(messages, model = 'glm-4.6') {
        const url = 'https://open.bigmodel.cn/api/paas/v4/chat/completions';

        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer YOUR_API_KEY',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                model: model,
                messages: messages,
                temperature: 0.6
            })
        });

        if (!response.ok) {
            throw new Error(`API è°ƒç”¨å¤±è´¥: ${response.status}`);
        }

        return await response.json();
    }

    // ä½¿ç”¨ç¤ºä¾‹
    const messages = [
        { role: 'user', content: 'ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±' }
    ];

    callZhipuAPI(messages)
        .then(result => {
            console.log(result.choices[0].message.content);
        })
        .catch(error => {
            console.error('é”™è¯¯:', error);
        });
    ```
  </Tab>

  <Tab title="Java">
    ```java  theme={null}
    import com.fasterxml.jackson.databind.ObjectMapper;
    import okhttp3.MediaType;
    import okhttp3.OkHttpClient;
    import okhttp3.Request;
    import okhttp3.RequestBody;
    import okhttp3.Response;
    import java.util.Collections;
    import java.util.HashMap;
    import java.util.Map;

    public class AgentExample {

        public static void main(String[] args) throws Exception {

            OkHttpClient client = new OkHttpClient();
            ObjectMapper mapper = new ObjectMapper();
            Map<String, String> messages = new HashMap<>(8);
            messages.put("role", "user");
            messages.put("content", "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±");
            Map<String, Object> requestBody = new HashMap<>();
            requestBody.put("model", "glm-4.6");
            requestBody.put("messages", Collections.singletonList(messages));
            requestBody.put("temperature", 0.6);

            String jsonBody = mapper.writeValueAsString(requestBody);
            MediaType JSON = MediaType.get("application/json; charset=utf-8");
            RequestBody body = RequestBody.create(JSON, jsonBody);
            Request request = new Request.Builder()
                .url("https://open.bigmodel.cn/api/paas/v4/chat/completions")
                .addHeader("Authorization", "Bearer your_api_key")
                .addHeader("Content-Type", "application/json")
                .post(body)
                .build();
            try (Response response = client.newCall(request).execute()) {
                System.out.println(response.body().string());
            }
        }
    }
    ```
  </Tab>
</Tabs>

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜      | è§£å†³æ–¹æ¡ˆ            |
| --- | ------- | --------------- |
| 401 | æœªæˆæƒ     | æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡® |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹  | é™ä½è¯·æ±‚é¢‘ç‡ï¼Œå®æ–½é‡è¯•æœºåˆ¶   |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | ç¨åé‡è¯•ï¼Œå¦‚æŒç»­å‡ºç°è¯·è”ç³»æ”¯æŒ |

æ›´å¤šé”™è¯¯ç å’Œè§£å†³æ–¹æ¡ˆè¯·å‚è€ƒ [API é”™è¯¯ç æ–‡æ¡£](/cn/faq/api-code)

## å®è·µå»ºè®®

<CardGroup cols={2}>
  <Card title="å®‰å…¨æ€§">
    * å¦¥å–„ä¿ç®¡ API Keyï¼Œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
    * ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶å­˜å‚¨æ•æ„Ÿä¿¡æ¯
    * å®šæœŸè½®æ¢ API Key
  </Card>

  <Card title="æ€§èƒ½ä¼˜åŒ–">
    * å®æ–½è¿æ¥æ± å’Œä¼šè¯å¤ç”¨
    * åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
    * ä½¿ç”¨å¼‚æ­¥è¯·æ±‚å¤„ç†é«˜å¹¶å‘åœºæ™¯
  </Card>

  <Card title="é”™è¯¯å¤„ç†">
    * å®æ–½æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶
    * è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
    * è®¾ç½®åˆç†çš„è¶…æ—¶å’Œé‡è¯•æ¬¡æ•°
  </Card>

  <Card title="ç›‘æ§">
    * ç›‘æ§ API è°ƒç”¨é¢‘ç‡å’ŒæˆåŠŸç‡
    * è·Ÿè¸ªå“åº”æ—¶é—´å’Œé”™è¯¯ç‡
    * è®¾ç½®å‘Šè­¦æœºåˆ¶
  </Card>
</CardGroup>

## æ›´å¤šèµ„æº

<CardGroup cols={2}>
  <Card title="API æ–‡æ¡£" icon={<svg style={{maskImage: "url(/resource/icon/book.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>} href="/cn/api/introduction">
    æŸ¥çœ‹å®Œæ•´çš„ API æ¥å£æ–‡æ¡£å’Œå‚æ•°è¯´æ˜
  </Card>

  <Card title="æŠ€æœ¯æ”¯æŒ" icon={<svg style={{maskImage: "url(/resource/icon/headset.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>} href="https://bigmodel.cn/online-book/customerService">
    è·å–æŠ€æœ¯æ”¯æŒå’Œå¸®åŠ©
  </Card>
</CardGroup>

<Note>
  å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ HTTPS åè®®ï¼Œå¹¶å®æ–½é€‚å½“çš„å®‰å…¨æªæ–½æ¥ä¿æŠ¤æ‚¨çš„ API å¯†é’¥å’Œæ•°æ®ä¼ è¾“ã€‚
</Note>



# è¿ç§»è‡³ GLM-4.6

<Tip>
  æœ¬æ–‡ä»‹ç»å¦‚ä½•å°†è°ƒç”¨ä» GLM-4.5 æˆ–å…¶å®ƒæ—©æœŸæ¨¡å‹è¿ç§»åˆ°æˆ‘ä»¬è¿„ä»Šä¸ºæ­¢æœ€å¼ºçš„ç¼–ç æ¨¡å‹ Z.ai GLM-4.6ï¼Œæ¶µç›–é‡‡æ ·å‚æ•°å·®å¼‚ã€æµå¼å·¥å…·è°ƒç”¨ç­‰è¦ç‚¹ã€‚
</Tip>

## GLM-4.6 çš„ç‰¹æ€§

* æ”¯æŒæ›´å¤§ä¸Šä¸‹æ–‡ä¸è¾“å‡ºï¼šæœ€å¤§ä¸Šä¸‹æ–‡ 200Kï¼Œæœ€å¤§è¾“å‡º 128Kã€‚
* æ–°å¢æ”¯æŒå·¥å…·è°ƒç”¨è¿‡ç¨‹çš„æµå¼è¾“å‡ºï¼ˆ`tool_stream=true`ï¼‰ï¼Œå®æ—¶è·å–å·¥å…·è°ƒç”¨å‚æ•°ã€‚
* åŒ GLM-4.5 ç³»åˆ—ï¼Œæ”¯æŒæ·±åº¦æ€è€ƒï¼ˆ`thinking={ type: "enabled" }`ï¼‰ã€‚
* æ›´å“è¶Šçš„ä»£ç æ€§èƒ½å’Œå…ˆè¿›çš„æ¨ç†èƒ½åŠ›ã€‚

## è¿ç§»æ¸…å•ï¼ˆChecklistï¼‰

* [ ] æ›´æ–°æ¨¡å‹ç¼–ç ä¸º `glm-4.6`
* [ ] é‡‡æ ·å‚æ•°ï¼š`temperature` é»˜è®¤å€¼ `1.0`, `top_p` é»˜è®¤å€¼ `0.95`ï¼Œå»ºè®®åªé€‰ä¸€ä¸ªè¿›è¡Œè°ƒå‚
* [ ] æ·±åº¦æ€è€ƒï¼šæŒ‰éœ€å…³é—­æˆ–å¯ç”¨ `thinking={ type: "enabled" }`ï¼Œç”¨äºå¤æ‚æ¨ç†/ç¼–ç 
* [ ] æµå¼å“åº”ï¼šå¯ç”¨ `stream=true` å¹¶æ­£ç¡®å¤„ç† `delta.reasoning_content` ä¸ `delta.content`
* [ ] æµå¼å·¥å…·è°ƒç”¨ï¼šå¯ç”¨ `stream=true` å’Œ `tool_stream=true` å¹¶æµå¼æ‹¼æ¥ `delta.tool_calls[*].function.arguments`
* [ ] æœ€å¤§è¾“å‡ºä¸ä¸Šä¸‹æ–‡ï¼šåˆç†è®¾ç½® `max_tokens`ï¼ˆGLM-4.6 æœ€å¤§è¾“å‡º 128Kï¼Œä¸Šä¸‹æ–‡ 200Kï¼‰
* [ ] Prompt ä¼˜åŒ–ï¼šé…åˆæ·±åº¦æ€è€ƒï¼Œé‡‡ç”¨æ›´æ˜ç¡®çš„æŒ‡ä»¤ä¸çº¦æŸ
* [ ] å¼€å‘ç¯å¢ƒéªŒè¯ï¼šè¿›è¡Œç”¨ä¾‹æµ‹è¯•ä¸å›å½’ï¼Œå…³æ³¨éšæœºæ€§ã€å»¶è¿Ÿã€å·¥å…·æµä¸­çš„å‚æ•°å®Œæ•´æ€§

## å¼€å§‹è¿ç§»

### 1. æ›´æ–°æ¨¡å‹ç¼–ç 

* å°† `model` æ›´æ–°ä¸º `glm-4.6`ã€‚

```python  theme={null}
resp = client.chat.completions.create(
    model="glm-4.6",
    messages=[{"role": "user", "content": "ç®€è¿° GLM-4.6 çš„ä¼˜åŠ¿"}]
)
```

### 2. æ›´æ–°é‡‡æ ·å‚æ•°

* `temperature`ï¼šæ§åˆ¶éšæœºæ€§ï¼›æ•°å€¼æ›´é«˜æ›´å‘æ•£ï¼Œæ•°å€¼æ›´ä½æ›´ç¨³å®šã€‚
* `top_p`ï¼šæ§åˆ¶æ ¸é‡‡æ ·ï¼›æ›´é«˜å€¼æ‰©å¤§å€™é€‰é›†ï¼Œæ›´ä½å€¼æ”¶æ•›å€™é€‰é›†ã€‚
* `temperature` é»˜è®¤ä¸º `1.0`, `top_p` é»˜è®¤ä¸º `0.95`, ä¸å»ºè®®åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚

```python  theme={null}
# Plan Aï¼šä½¿ç”¨ temperatureï¼ˆæ¨èï¼‰
resp = client.chat.completions.create(
    model="glm-4.6",
    messages=[{"role": "user", "content": "å†™ä¸€æ®µæ›´å…·åˆ›æ„çš„å“ç‰Œä»‹ç»"}],
    temperature=1.0
)

# Plan Bï¼šä½¿ç”¨ top_p
resp = client.chat.completions.create(
    model="glm-4.6",
    messages=[{"role": "user", "content": "ç”Ÿæˆæ›´ç¨³å®šçš„æŠ€æœ¯è¯´æ˜"}],
    top_p=0.8
)
```

### 3. æ·±åº¦æ€è€ƒï¼ˆå¯é€‰ï¼‰

* GLM-4.6 å»¶ç»­æ”¯æŒæ·±åº¦æ€è€ƒèƒ½åŠ›ï¼Œé»˜è®¤ä¸ºå¼€å¯ã€‚
* åœ¨å¤æ‚æ¨ç†ã€ç¼–ç ä»»åŠ¡ä¸­ï¼Œå»ºè®®å¼€å¯ï¼š

```python  theme={null}
resp = client.chat.completions.create(
    model="glm-4.6",
    messages=[{"role": "user", "content": "ä¸ºæˆ‘è®¾è®¡ä¸€ä¸ªä¸‰å±‚å¾®æœåŠ¡æ¶æ„"}],
    thinking={"type": "enabled"}
)
```

### 4. æµå¼è¾“å‡ºä¸æµå¼å·¥å…·è°ƒç”¨ï¼ˆå¯é€‰ï¼‰

* GLM-4.6 ç‹¬å®¶æ”¯æŒå·¥å…·è°ƒç”¨è¿‡ç¨‹çš„å®æ—¶æµå¼æ„å»ºä¸è¾“å‡ºï¼Œé»˜è®¤ `False` å…³é—­ï¼Œéœ€åŒæ—¶æ‰“å¼€ï¼š
  * `stream=True`ï¼šå¼€å¯å“åº”çš„æµå¼è¾“å‡º
  * `tool_stream=True`ï¼šå¼€å¯å·¥å…·è°ƒç”¨å‚æ•°çš„æµå¼è¾“å‡º

```python  theme={null}
response = client.chat.completions.create(
    model="glm-4.6",
    messages=[{"role": "user", "content": "åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·"}],
    tools=[
        {
            "type": "function",
            "function": {
                "name": "get_weather",
                "description": "è·å–æŒ‡å®šåœ°ç‚¹å½“å‰çš„å¤©æ°”æƒ…å†µ",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "location": {"type": "string", "description": "åŸå¸‚ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ã€ä¸Šæµ·"},
                        "unit": {"type": "string", "enum": ["celsius", "fahrenheit"]}
                    },
                    "required": ["location"]
                }
            }
        }
    ],
    stream=True,
    tool_stream=True,
)

# åˆå§‹åŒ–æµå¼æ”¶é›†å˜é‡
reasoning_content = ""
content = ""
final_tool_calls = {}
reasoning_started = False
content_started = False

# å¤„ç†æµå¼å“åº”
for chunk in response:
    if not chunk.choices:
        continue

    delta = chunk.choices[0].delta

    # æµå¼æ¨ç†è¿‡ç¨‹è¾“å‡º
    if hasattr(delta, 'reasoning_content') and delta.reasoning_content:
        if not reasoning_started and delta.reasoning_content.strip():
            print("\nğŸ§  æ€è€ƒè¿‡ç¨‹ï¼š")
            reasoning_started = True
        reasoning_content += delta.reasoning_content
        print(delta.reasoning_content, end="", flush=True)

    # æµå¼å›ç­”å†…å®¹è¾“å‡º
    if hasattr(delta, 'content') and delta.content:
        if not content_started and delta.content.strip():
            print("\n\nğŸ’¬ å›ç­”å†…å®¹ï¼š")
            content_started = True
        content += delta.content
        print(delta.content, end="", flush=True)

    # æµå¼å·¥å…·è°ƒç”¨ä¿¡æ¯ï¼ˆå‚æ•°æ‹¼æ¥ï¼‰
    if delta.tool_calls:
        for tool_call in delta.tool_calls:
            idx = tool_call.index
            if idx not in final_tool_calls:
                final_tool_calls[idx] = tool_call
                final_tool_calls[idx].function.arguments = tool_call.function.arguments
            else:
                final_tool_calls[idx].function.arguments += tool_call.function.arguments

# è¾“å‡ºæœ€ç»ˆçš„å·¥å…·è°ƒç”¨ä¿¡æ¯
if final_tool_calls:
    print("\nğŸ“‹ å‘½ä¸­ Function Calls :")
    for idx, tool_call in final_tool_calls.items():
        print(f"  {idx}: å‡½æ•°å: {tool_call.function.name}, å‚æ•°: {tool_call.function.arguments}")
```

è¯¦è§ï¼š[å·¥å…·æµå¼è¾“å‡ºæ–‡æ¡£](/cn/guide/tools/stream-tool)

### 5. æµ‹è¯•ä¸å›å½’

> åœ¨å¼€å‘ç¯å¢ƒä¸­å…ˆè¡ŒéªŒè¯è¿ç§»åçš„è°ƒç”¨æ˜¯å¦ç¨³å®šï¼Œå…³æ³¨ï¼š

* å“åº”æ˜¯å¦ç¬¦åˆé¢„æœŸã€æ˜¯å¦å‡ºç°è¿‡åº¦éšæœºæˆ–è¿‡åº¦ä¿å®ˆçš„è¾“å‡º
* å·¥å…·æµå¼æ„å»ºä¸è¾“å‡ºæ˜¯å¦æ­£å¸¸
* é•¿ä¸Šä¸‹æ–‡ä¸æ·±åº¦æ€è€ƒåœºæ™¯ä¸‹çš„å»¶è¿Ÿä¸æˆæœ¬

## æ›´å¤šèµ„æº

<CardGroup cols={2}>
  <Card title="æ ¸å¿ƒå‚æ•°" icon={<svg style={{maskImage: "url(/resource/icon/star.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>} href="/cn/guide/start/concept-param">
    æ¨¡å‹å¸¸è§å‚æ•°æ¦‚å¿µä¸é‡‡æ ·å»ºè®®
  </Card>

  <Card title="å·¥å…·æµå¼è¾“å‡º" icon={<svg style={{maskImage: "url(/resource/icon/code.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>} href="/cn/guide/tools/stream-tool">
    æŸ¥çœ‹å·¥å…·æµå¼è¾“å‡ºä½¿ç”¨è¯¦æƒ…
  </Card>

  <Card title="API å‚è€ƒ" icon={<svg style={{maskImage: "url(/resource/icon/book.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>} href="/cn/api/introduction">
    æŸ¥çœ‹å®Œæ•´çš„ API æ–‡æ¡£
  </Card>

  <Card title="æŠ€æœ¯æ”¯æŒ" icon={<svg style={{maskImage: "url(/resource/icon/headset.svg)", maskRepeat: "no-repeat", maskPosition: "center center",}} className={"h-6 w-6 bg-primary dark:bg-primary-light !m-0 shrink-0"}/>} href="https://bigmodel.cn/online-book/customerService">
    è·å–æŠ€æœ¯æ”¯æŒå’Œå¸®åŠ©
  </Card>
</CardGroup>
