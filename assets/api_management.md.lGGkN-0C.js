import{_ as s,o as i,c as e,ag as n}from"./chunks/framework.DM0yugQT.js";const c=JSON.parse('{"title":"Management API","description":"","frontmatter":{},"headers":[],"relativePath":"api/management.md","filePath":"api/management.md","lastUpdated":1771881719000}'),t={name:"api/management.md"};function l(p,a,h,o,d,k){return i(),e("div",null,[...a[0]||(a[0]=[n(`<h1 id="management-api" tabindex="-1">Management API <a class="header-anchor" href="#management-api" aria-label="Permalink to &quot;Management API&quot;">​</a></h1><p>Management endpoints provide runtime inspection and administrative controls.</p><h2 id="access-model" tabindex="-1">Access Model <a class="header-anchor" href="#access-model" aria-label="Permalink to &quot;Access Model&quot;">​</a></h2><ul><li>Surface path: <code>/v0/management/*</code></li><li>Protected by management key.</li><li>Disabled entirely when <code>remote-management.secret-key</code> is empty.</li></ul><h3 id="enable-and-protect-management-access" tabindex="-1">Enable and Protect Management Access <a class="header-anchor" href="#enable-and-protect-management-access" aria-label="Permalink to &quot;Enable and Protect Management Access&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">remote-management</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  allow-remote</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  secret-key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;replace-with-strong-secret&quot;</span></span></code></pre></div><p>Use either header style:</p><ul><li><code>Authorization: Bearer &lt;management-key&gt;</code></li><li><code>X-Management-Key: &lt;management-key&gt;</code></li></ul><h2 id="common-endpoints" tabindex="-1">Common Endpoints <a class="header-anchor" href="#common-endpoints" aria-label="Permalink to &quot;Common Endpoints&quot;">​</a></h2><ul><li><code>GET /v0/management/config</code></li><li><code>GET /v0/management/config.yaml</code></li><li><code>GET /v0/management/auth-files</code></li><li><code>GET /v0/management/logs</code></li><li><code>POST /v0/management/api-call</code></li><li><code>GET /v0/management/quota-exceeded/switch-project</code></li><li><code>PUT|PATCH /v0/management/quota-exceeded/switch-project</code></li><li><code>GET /v0/management/quota-exceeded/switch-preview-model</code></li><li><code>PUT|PATCH /v0/management/quota-exceeded/switch-preview-model</code></li><li><code>GET /v0/management/kiro-quota</code></li></ul><p>Note: some management routes are provider/tool-specific and may vary by enabled features.</p><h2 id="practical-examples" tabindex="-1">Practical Examples <a class="header-anchor" href="#practical-examples" aria-label="Permalink to &quot;Practical Examples&quot;">​</a></h2><p>Read effective config:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v0/management/config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><p>Inspect auth file summary:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v0/management/auth-files</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;X-Management-Key: &lt;management-key&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><p>Tail logs stream/snapshot:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:8317/v0/management/logs?lines=200&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot;</span></span></code></pre></div><p>Read current quota fallback toggles:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v0/management/quota-exceeded/switch-project</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v0/management/quota-exceeded/switch-preview-model</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> provider</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> quota</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Kiro):</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\`\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v0/management/kiro-quota </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><p>Find the target credential:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v0/management/auth-files</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.[] | &quot;\\(.provider) \\(.index</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> // .auth_index</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> // &quot;n/a&quot;) \\(.name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> // .type)&quot;&#39;</span></span></code></pre></div><p>Read Kiro quota for a specific auth index:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:8317/v0/management/kiro-quota?auth_index=0&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer &lt;management-key&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>Update quota fallback toggles:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\`bash</span></span>
<span class="line"><span>curl -sS -X PUT http://localhost:8317/v0/management/quota-exceeded/switch-project \\</span></span>
<span class="line"><span>  -H &quot;Authorization: Bearer &lt;management-key&gt;&quot; \\</span></span>
<span class="line"><span>  -H &quot;Content-Type: application/json&quot; \\</span></span>
<span class="line"><span>  -d &#39;{&quot;value&quot;:true}&#39;</span></span>
<span class="line"><span>curl -sS -X PUT http://localhost:8317/v0/management/quota-exceeded/switch-preview-model \\</span></span>
<span class="line"><span>  -H &quot;Authorization: Bearer &lt;management-key&gt;&quot; \\</span></span>
<span class="line"><span>  -H &quot;Content-Type: application/json&quot; \\</span></span>
<span class="line"><span>  -d &#39;{&quot;value&quot;:true}&#39;</span></span></code></pre></div><h2 id="failure-modes" tabindex="-1">Failure Modes <a class="header-anchor" href="#failure-modes" aria-label="Permalink to &quot;Failure Modes&quot;">​</a></h2><ul><li><code>404</code> on all management routes: management disabled (empty secret key).</li><li><code>401</code>: invalid or missing management key.</li><li><code>403</code>: remote request blocked when <code>allow-remote: false</code>.</li><li><code>500</code>: malformed config/auth state causing handler errors.</li></ul><h2 id="operational-guidance" tabindex="-1">Operational Guidance <a class="header-anchor" href="#operational-guidance" aria-label="Permalink to &quot;Operational Guidance&quot;">​</a></h2><ul><li>Keep <code>allow-remote: false</code> unless absolutely required.</li><li>Place management API behind private network or VPN.</li><li>Rotate management key and avoid storing it in shell history.</li></ul><h2 id="related-docs" tabindex="-1">Related Docs <a class="header-anchor" href="#related-docs" aria-label="Permalink to &quot;Related Docs&quot;">​</a></h2><ul><li><a href="./operations">Operations API</a></li><li><a href="/troubleshooting">Troubleshooting</a></li></ul>`,31)])])}const g=s(t,[["render",l]]);export{c as __pageData,g as default};
