import{_ as i,o as a,c as t,ag as n}from"./chunks/framework.DM0yugQT.js";const F=JSON.parse('{"title":"CPB-0721..0730 Lane E5 Notes","description":"","frontmatter":{},"headers":[],"relativePath":"guides/cpb-0721-0730-lane-e5-notes.md","filePath":"guides/cpb-0721-0730-lane-e5-notes.md","lastUpdated":1771838886000}'),e={name:"guides/cpb-0721-0730-lane-e5-notes.md"};function l(p,s,h,o,k,r){return a(),t("div",null,[...s[0]||(s[0]=[n(`<h1 id="cpb-0721-0730-lane-e5-notes" tabindex="-1">CPB-0721..0730 Lane E5 Notes <a class="header-anchor" href="#cpb-0721-0730-lane-e5-notes" aria-label="Permalink to &quot;CPB-0721..0730 Lane E5 Notes&quot;">​</a></h1><h2 id="cpb-0721-antigravity-api-400-compatibility-ref-defs" tabindex="-1">CPB-0721 - Antigravity API 400 Compatibility (<code>$ref</code> / <code>$defs</code>) <a class="header-anchor" href="#cpb-0721-antigravity-api-400-compatibility-ref-defs" aria-label="Permalink to &quot;CPB-0721 - Antigravity API 400 Compatibility (\`$ref\` / \`$defs\`)&quot;">​</a></h2><h3 id="regression-checks" tabindex="-1">Regression checks <a class="header-anchor" href="#regression-checks" aria-label="Permalink to &quot;Regression checks&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Executor build request sanitization for tool schemas</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./pkg/llmproxy/executor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TestAntigravityBuildRequest_RemovesRefAndDefsFromToolSchema</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -count=1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./pkg/llmproxy/runtime/executor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TestAntigravityBuildRequest_RemovesRefAndDefsFromToolSchema</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -count=1</span></span></code></pre></div><h3 id="shared-utility-guardrails" tabindex="-1">Shared utility guardrails <a class="header-anchor" href="#shared-utility-guardrails" aria-label="Permalink to &quot;Shared utility guardrails&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verifies recursive key-drop in JSON schema payloads</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./pkg/llmproxy/util</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TestDeleteKeysByName</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -count=1</span></span></code></pre></div><h3 id="quickstart-probe-manual" tabindex="-1">Quickstart probe (manual) <a class="header-anchor" href="#quickstart-probe-manual" aria-label="Permalink to &quot;Quickstart probe (manual)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8317/v1/chat/completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer demo-client-key&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;model&quot;:&quot;claude-opus-4-6&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;messages&quot;:[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:&quot;ping&quot;}],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;tools&quot;:[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;type&quot;:&quot;function&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;function&quot;:{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;name&quot;:&quot;test_tool&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;description&quot;:&quot;test tool schema&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;parameters&quot;:{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;type&quot;:&quot;object&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;properties&quot;:{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              &quot;payload&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;$defs&quot;: {&quot;Address&quot;:{&quot;type&quot;:&quot;object&quot;}},</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;$ref&quot;: &quot;#/schemas/Address&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;city&quot;: {&quot;type&quot;:&quot;string&quot;}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    ]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  }&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.&#39;</span></span></code></pre></div><p>Expected:</p><ul><li>Request completes and returns an object under <code>choices</code> or a valid provider error.</li><li>No request-rejection specifically indicating <code>Invalid JSON</code>, <code>$ref</code>, or <code>$defs</code> payload incompatibility in upstream logs.</li></ul>`,10)])])}const c=i(e,[["render",l]]);export{F as __pageData,c as default};
