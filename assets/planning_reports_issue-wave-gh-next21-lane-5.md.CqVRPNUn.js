import{_ as o,o as l,c as i,ag as t}from"./chunks/framework.DM0yugQT.js";const g=JSON.parse('{"title":"Issue Wave GH-Next21 - Lane 5 Report","description":"","frontmatter":{},"headers":[],"relativePath":"planning/reports/issue-wave-gh-next21-lane-5.md","filePath":"planning/reports/issue-wave-gh-next21-lane-5.md","lastUpdated":1771765493000}'),r={name:"planning/reports/issue-wave-gh-next21-lane-5.md"};function a(c,e,n,d,u,s){return l(),i("div",null,[...e[0]||(e[0]=[t('<h1 id="issue-wave-gh-next21-lane-5-report" tabindex="-1">Issue Wave GH-Next21 - Lane 5 Report <a class="header-anchor" href="#issue-wave-gh-next21-lane-5-report" aria-label="Permalink to &quot;Issue Wave GH-Next21 - Lane 5 Report&quot;">​</a></h1><p>Date: 2026-02-22 Lane: 5 (Config/Platform Ops) Scope issues: #201, #158, #160</p><h2 id="status-summary" tabindex="-1">Status Summary <a class="header-anchor" href="#status-summary" aria-label="Permalink to &quot;Status Summary&quot;">​</a></h2><ul><li>#201: <code>partial</code> (validated existing low-risk read-only handling; no new code delta in this lane commit)</li><li>#158: <code>partial</code> (implemented config-level OAuth upstream URL overrides for key OAuth channels with regression tests)</li><li>#160: <code>done</code> (validated existing duplicate tool-call merge protection with focused regression test)</li></ul><h2 id="per-issue-detail" tabindex="-1">Per-Issue Detail <a class="header-anchor" href="#per-issue-detail" aria-label="Permalink to &quot;Per-Issue Detail&quot;">​</a></h2><h3 id="_201-failed-to-save-config-on-read-only-filesystem" tabindex="-1">#201 - failed to save config on read-only filesystem <a class="header-anchor" href="#_201-failed-to-save-config-on-read-only-filesystem" aria-label="Permalink to &quot;#201 - failed to save config on read-only filesystem&quot;">​</a></h3><ul><li>Current behavior validated: <ul><li>Management config persist path detects read-only write errors and returns runtime-only success payload (<code>persisted: false</code>) instead of hard failure for EROFS/read-only filesystem.</li></ul></li><li>Evidence paths: <ul><li><code>pkg/llmproxy/api/handlers/management/handler.go</code></li><li><code>pkg/llmproxy/api/handlers/management/management_extra_test.go</code></li></ul></li><li>Lane delta: <ul><li>No additional code change required after validation.</li></ul></li></ul><h3 id="_158-support-custom-upstream-url-for-oauth-channels-in-config" tabindex="-1">#158 - support custom upstream URL for OAuth channels in config <a class="header-anchor" href="#_158-support-custom-upstream-url-for-oauth-channels-in-config" aria-label="Permalink to &quot;#158 - support custom upstream URL for OAuth channels in config&quot;">​</a></h3><ul><li>Implemented low-risk config/platform fix: <ul><li>Added new global config map: <code>oauth-upstream</code> (channel -&gt; base URL).</li><li>Added normalization + lookup helpers in config: <ul><li>lowercase channel key</li><li>trim whitespace</li><li>strip trailing slash</li></ul></li><li>Wired executor/runtime URL resolution precedence: <ol><li>auth <code>base_url</code> override</li><li><code>oauth-upstream</code> channel override</li><li>built-in default URL</li></ol></li></ul></li><li>Channels wired in this lane: <ul><li><code>claude</code>, <code>codex</code>, <code>codex-websockets</code>, <code>qwen</code>, <code>iflow</code>, <code>gemini-cli</code>, <code>github-copilot</code>, <code>antigravity</code></li></ul></li><li>Files changed: <ul><li><code>pkg/llmproxy/config/config.go</code></li><li><code>pkg/llmproxy/config/oauth_upstream_test.go</code></li><li><code>pkg/llmproxy/executor/oauth_upstream.go</code></li><li><code>pkg/llmproxy/executor/oauth_upstream_test.go</code></li><li><code>pkg/llmproxy/runtime/executor/oauth_upstream.go</code></li><li><code>pkg/llmproxy/executor/claude_executor.go</code></li><li><code>pkg/llmproxy/executor/codex_executor.go</code></li><li><code>pkg/llmproxy/executor/codex_websockets_executor.go</code></li><li><code>pkg/llmproxy/executor/gemini_cli_executor.go</code></li><li><code>pkg/llmproxy/executor/github_copilot_executor.go</code></li><li><code>pkg/llmproxy/executor/iflow_executor.go</code></li><li><code>pkg/llmproxy/executor/qwen_executor.go</code></li><li><code>pkg/llmproxy/executor/antigravity_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/claude_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/codex_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/codex_websockets_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/gemini_cli_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/github_copilot_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/iflow_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/qwen_executor.go</code></li><li><code>pkg/llmproxy/runtime/executor/antigravity_executor.go</code></li><li><code>config.example.yaml</code></li></ul></li></ul><h3 id="_160-duplicate-output-in-kiro-proxy" tabindex="-1">#160 - duplicate output in Kiro proxy <a class="header-anchor" href="#_160-duplicate-output-in-kiro-proxy" aria-label="Permalink to &quot;#160 - duplicate output in Kiro proxy&quot;">​</a></h3><ul><li>Validation result: <ul><li>Existing merge logic already de-duplicates adjacent assistant <code>tool_calls</code> by <code>id</code> and preserves order.</li></ul></li><li>Evidence paths: <ul><li><code>pkg/llmproxy/translator/kiro/common/message_merge.go</code></li><li><code>pkg/llmproxy/translator/kiro/common/message_merge_test.go</code></li></ul></li><li>Lane delta: <ul><li>No additional code change required after validation.</li></ul></li></ul><h2 id="test-evidence" tabindex="-1">Test Evidence <a class="header-anchor" href="#test-evidence" aria-label="Permalink to &quot;Test Evidence&quot;">​</a></h2><ul><li><code>go test ./pkg/llmproxy/config -run &#39;OAuthUpstream|LoadConfig|OAuthModelAlias&#39; -count=1</code><ul><li>Result: <code>ok github.com/router-for-me/CLIProxyAPI/v6/pkg/llmproxy/config</code></li></ul></li><li><code>go test ./pkg/llmproxy/executor -run &#39;OAuthUpstream|Claude|Codex|Qwen|IFlow|GeminiCLI|GitHubCopilot|Antigravity&#39; -count=1</code><ul><li>Result: <code>ok github.com/router-for-me/CLIProxyAPI/v6/pkg/llmproxy/executor</code></li></ul></li><li><code>go test ./pkg/llmproxy/runtime/executor -run &#39;Claude|Codex|Qwen|IFlow|GeminiCLI|GitHubCopilot|Antigravity&#39; -count=1</code><ul><li>Result: <code>ok github.com/router-for-me/CLIProxyAPI/v6/pkg/llmproxy/runtime/executor</code></li></ul></li><li><code>go test ./pkg/llmproxy/api/handlers/management -run &#39;ReadOnlyConfig|isReadOnlyConfigWriteError&#39; -count=1</code><ul><li>Result: <code>ok github.com/router-for-me/CLIProxyAPI/v6/pkg/llmproxy/api/handlers/management</code></li></ul></li><li><code>go test ./pkg/llmproxy/translator/kiro/common -run &#39;DeduplicatesToolCallIDs|MergeAdjacentMessages&#39; -count=1</code><ul><li>Result: <code>ok github.com/router-for-me/CLIProxyAPI/v6/pkg/llmproxy/translator/kiro/common</code></li></ul></li></ul><h2 id="quality-gate-note" tabindex="-1">Quality Gate Note <a class="header-anchor" href="#quality-gate-note" aria-label="Permalink to &quot;Quality Gate Note&quot;">​</a></h2><ul><li><code>task quality</code> reached <code>golangci-lint run ./...</code> and remained blocked with no progress output during repeated polling.</li><li>Concurrent linter jobs were present in the environment (<code>task quality</code> and <code>golangci-lint run ./...</code> from other sessions), so this lane records quality gate as blocked by concurrent golangci-lint contention.</li></ul>',15)])])}const m=o(r,[["render",a]]);export{g as __pageData,m as default};
