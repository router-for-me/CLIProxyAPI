import{_ as o,o as i,c as t,ag as l}from"./chunks/framework.DM0yugQT.js";const u=JSON.parse('{"title":"Open Items Validation (2026-02-22)","description":"","frontmatter":{},"headers":[],"relativePath":"reports/fragemented/OPEN_ITEMS_VALIDATION_2026-02-22.md","filePath":"reports/fragemented/OPEN_ITEMS_VALIDATION_2026-02-22.md","lastUpdated":1771817096000}'),a={name:"reports/fragemented/OPEN_ITEMS_VALIDATION_2026-02-22.md"};function n(r,e,d,s,c,m){return i(),t("div",null,[...e[0]||(e[0]=[l('<h1 id="open-items-validation-2026-02-22" tabindex="-1">Open Items Validation (2026-02-22) <a class="header-anchor" href="#open-items-validation-2026-02-22" aria-label="Permalink to &quot;Open Items Validation (2026-02-22)&quot;">​</a></h1><p>Scope audited against <code>upstream/main</code> (<code>af8e9ef45806889f3016d91fb4da764ceabe82a2</code>) for:</p><ul><li>Issues: #198, #206, #210, #232, #241, #258</li><li>PRs: #259, #11</li></ul><h2 id="already-implemented" tabindex="-1">Already Implemented <a class="header-anchor" href="#already-implemented" aria-label="Permalink to &quot;Already Implemented&quot;">​</a></h2><ul><li>PR #11 <code>fix: handle unexpected &#39;content_block_start&#39; event order (fixes #4)</code><ul><li>Status: Implemented on <code>main</code> (behavior present even though exact PR commit is not merged).</li><li>Current <code>main</code> emits <code>message_start</code> before any content/tool block emission on first delta chunk.</li></ul></li><li>Issue #258 <code>Support variant fallback for reasoning_effort in codex models</code><ul><li>Status: Implemented on current <code>main</code>.</li><li>Current translators map top-level <code>variant</code> to Codex reasoning effort when <code>reasoning.effort</code> is absent.</li></ul></li></ul><h2 id="partially-implemented" tabindex="-1">Partially Implemented <a class="header-anchor" href="#partially-implemented" aria-label="Permalink to &quot;Partially Implemented&quot;">​</a></h2><ul><li>Issue #198 <code>Cursor CLI \\ Auth Support</code><ul><li>Partial: Cursor-related request-format handling exists for Kiro thinking tags, but no Cursor auth/provider implementation exists.</li></ul></li><li>Issue #232 <code>Add AMP auth as Kiro</code><ul><li>Partial: AMP module and AMP upstream config exist, but no AMP auth provider/login flow in <code>internal/auth</code>.</li></ul></li><li>Issue #241 <code>copilot context length should always be 128K</code><ul><li>Partial: Some GitHub Copilot models are 128K, but many remain 200K (and Gemini entries at 1,048,576).</li></ul></li><li>PR #259 <code>Normalize Codex schema handling</code><ul><li>Partial: <code>main</code> already has some Codex websocket normalization (<code>response.done</code> -&gt; <code>response.completed</code>), but the proposed schema-normalization functions/tests and install flow are not present.</li></ul></li></ul><h2 id="not-implemented" tabindex="-1">Not Implemented <a class="header-anchor" href="#not-implemented" aria-label="Permalink to &quot;Not Implemented&quot;">​</a></h2><ul><li>Issue #206 <code>Nullable type arrays in tool schemas cause 400 on Antigravity/Droid Factory</code><ul><li>Not implemented on <code>main</code>; the problematic uppercasing path for tool parameter <code>type</code> is still present.</li></ul></li><li>Issue #210 <code>Kiro x Ampcode Bash parameter incompatibility</code><ul><li>Not implemented on <code>main</code>; truncation detector still requires <code>Bash: {&quot;command&quot;}</code> instead of <code>cmd</code>.</li></ul></li></ul><h2 id="evidence-commit-file-refs" tabindex="-1">Evidence (commit/file refs) <a class="header-anchor" href="#evidence-commit-file-refs" aria-label="Permalink to &quot;Evidence (commit/file refs)&quot;">​</a></h2><ul><li><p>Baseline commit:</p><ul><li><code>upstream/main</code> -&gt; <code>af8e9ef45806889f3016d91fb4da764ceabe82a2</code></li></ul></li><li><p>PR #11 implemented behavior:</p><ul><li><code>internal/translator/openai/claude/openai_claude_response.go:130</code> emits <code>message_start</code> immediately on first <code>delta</code>.</li><li><code>internal/translator/openai/claude/openai_claude_response.go:156</code></li><li><code>internal/translator/openai/claude/openai_claude_response.go:178</code></li><li><code>internal/translator/openai/claude/openai_claude_response.go:225</code></li><li>File history on <code>main</code>: commit <code>cbe56955</code> (<code>Merge pull request #227 from router-for-me/plus</code>) contains current implementation.</li></ul></li><li><p>Issue #206 not implemented:</p><ul><li><code>internal/translator/gemini/openai/responses/gemini_openai-responses_request.go:357</code></li><li><code>internal/translator/gemini/openai/responses/gemini_openai-responses_request.go:364</code></li><li><code>internal/translator/gemini/openai/responses/gemini_openai-responses_request.go:365</code></li><li><code>internal/translator/gemini/openai/responses/gemini_openai-responses_request.go:371</code></li><li>These lines still uppercase and rewrite schema types, matching reported failure mode.</li></ul></li><li><p>Issue #210 not implemented:</p><ul><li><code>internal/translator/kiro/claude/truncation_detector.go:66</code> still has <code>&quot;Bash&quot;: {&quot;command&quot;}</code>.</li></ul></li><li><p>Issue #241 partially implemented:</p><ul><li>128K examples: <code>internal/registry/model_definitions.go:153</code>, <code>internal/registry/model_definitions.go:167</code></li><li>200K examples still present: <code>internal/registry/model_definitions.go:181</code>, <code>internal/registry/model_definitions.go:207</code>, <code>internal/registry/model_definitions.go:220</code>, <code>internal/registry/model_definitions.go:259</code>, <code>internal/registry/model_definitions.go:272</code>, <code>internal/registry/model_definitions.go:298</code></li><li>1M examples: <code>internal/registry/model_definitions.go:395</code>, <code>internal/registry/model_definitions.go:417</code></li><li>Relevant history includes <code>740277a9</code> and <code>f2b1ec4f</code> (Copilot model definition updates).</li></ul></li><li><p>Issue #258 implemented:</p><ul><li>Chat-completions translator maps <code>variant</code> fallback: <code>pkg/llmproxy/translator/codex/openai/chat-completions/codex_openai_request.go:56</code>.</li><li>Responses translator maps <code>variant</code> fallback: <code>pkg/llmproxy/translator/codex/openai/responses/codex_openai-responses_request.go:49</code>.</li><li>Regression coverage exists in <code>test/thinking_conversion_test.go:2820</code>.</li></ul></li><li><p>Issue #198 partial (format support, no provider auth):</p><ul><li>Cursor-format mention in Kiro translator comments: <code>internal/translator/kiro/claude/kiro_claude_request.go:192</code>, <code>internal/translator/kiro/claude/kiro_claude_request.go:443</code></li><li>No <code>internal/auth/cursor</code> provider on <code>main</code>; auth providers under <code>internal/auth</code> are: antigravity/claude/codex/copilot/gemini/iflow/kilo/kimi/kiro/qwen/vertex.</li></ul></li><li><p>Issue #232 partial (AMP exists but not as auth provider):</p><ul><li>AMP config exists: <code>internal/config/config.go:111</code>-<code>internal/config/config.go:112</code></li><li>AMP module exists: <code>internal/api/modules/amp/routes.go:1</code></li><li><code>internal/auth</code> has no <code>amp</code> auth provider directory on <code>main</code>.</li></ul></li><li><p>PR #259 partial:</p><ul><li>Missing from <code>main</code>: <code>install.sh</code> (file absent on <code>upstream/main</code>).</li><li>Missing from <code>main</code>: <code>internal/runtime/executor/codex_executor_schema_test.go</code> (file absent).</li><li>Missing from <code>main</code>: <code>normalizeCodexToolSchemas</code> / <code>normalizeJSONSchemaArrays</code> symbols (no matches in <code>internal/runtime/executor/codex_executor.go</code>).</li><li>Already present adjacent normalization: <code>internal/runtime/executor/codex_websockets_executor.go:979</code> (<code>normalizeCodexWebsocketCompletion</code>).</li></ul></li></ul><h2 id="recommended-next-5" tabindex="-1">Recommended Next 5 <a class="header-anchor" href="#recommended-next-5" aria-label="Permalink to &quot;Recommended Next 5&quot;">​</a></h2><ol><li>Implement #206 exactly as proposed: remove per-property type uppercasing in Gemini responses translator and pass tool schema raw JSON (with tests for <code>[&quot;string&quot;,&quot;null&quot;]</code> and nested schemas).</li><li>Implement #210 by supporting <code>Bash: {&quot;cmd&quot;}</code> in Kiro truncation required-fields map (or dual-accept with explicit precedence), plus regression test for Ampcode loop case.</li><li>Revalidate #259 scope and move implemented subset into <code>Already Implemented</code> to keep status drift near zero.</li><li>Resolve #259 as a focused split: (a) codex schema normalization + tests, (b) install flow/docs as separate PR to reduce review risk.</li><li>Decide policy for #241 (keep provider-native context lengths vs force 128K), then align <code>internal/registry/model_definitions.go</code> and add a consistency test for Copilot context lengths.</li></ol>',13)])])}const g=o(a,[["render",n]]);export{u as __pageData,g as default};
