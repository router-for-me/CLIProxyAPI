<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Technical Specification: Library-First Architecture (pkg/llmproxy) | cliproxy++</title>
    <meta name="description" content="cliproxyapi-plusplus documentation">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.Cv8KQT_A.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DAWI9Mei.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.npqyt1PR.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DM0yugQT.js">
    <link rel="modulepreload" href="/assets/features_architecture_fragemented_SPEC.md.Dj96mGpc.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>cliproxy++</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/start-here" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Start Here</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tutorials/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Tutorials</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/how-to/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>How-to</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/explanation/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Explanation</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/getting-started" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Getting Started</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/provider-usage" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Providers</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/provider-catalog" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Provider Catalog</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/operations/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Operations</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/routing-reference" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Reference</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/api/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>API</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docsets/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Docsets</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kooshapari/cliproxyapi-plusplus" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kooshapari/cliproxyapi-plusplus" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Guide</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/getting-started" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/install" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Install</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/provider-usage" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Provider Usage</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/provider-catalog" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Provider Catalog</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/provider-operations" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Provider Operations</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/troubleshooting" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Troubleshooting</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/planning/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Planning Boards</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Reference</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/routing-reference" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Routing and Models</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/features/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Feature Guides</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/docsets/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Docsets</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>API</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>API Index</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api/openai-compatible" data-v-0009425e><!--[--><p class="text" data-v-0009425e>OpenAI-Compatible API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api/management" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Management API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api/operations" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Operations API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _features_architecture_fragemented_SPEC" data-v-e6f2a212><div><h1 id="technical-specification-library-first-architecture-pkg-llmproxy" tabindex="-1">Technical Specification: Library-First Architecture (pkg/llmproxy) <a class="header-anchor" href="#technical-specification-library-first-architecture-pkg-llmproxy" aria-label="Permalink to &quot;Technical Specification: Library-First Architecture (pkg/llmproxy)&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p><strong>cliproxyapi++</strong> implements a &quot;Library-First&quot; architectural pattern by extracting all core proxy logic from the traditional <code>internal/</code> package into a public, reusable <code>pkg/llmproxy</code> module. This transformation enables external Go applications to import and embed the entire translation, authentication, and communication engine without depending on the CLI binary.</p><h2 id="architecture-migration" tabindex="-1">Architecture Migration <a class="header-anchor" href="#architecture-migration" aria-label="Permalink to &quot;Architecture Migration&quot;">​</a></h2><h3 id="before-mainline-structure" tabindex="-1">Before: Mainline Structure <a class="header-anchor" href="#before-mainline-structure" aria-label="Permalink to &quot;Before: Mainline Structure&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CLIProxyAPI/</span></span>
<span class="line"><span>├── internal/</span></span>
<span class="line"><span>│   ├── translator/      # Core translation logic (NOT IMPORTABLE)</span></span>
<span class="line"><span>│   ├── provider/        # Provider executors (NOT IMPORTABLE)</span></span>
<span class="line"><span>│   └── auth/            # Auth management (NOT IMPORTABLE)</span></span>
<span class="line"><span>└── cmd/server/</span></span></code></pre></div><h3 id="after-cliproxyapi-structure" tabindex="-1">After: cliproxyapi++ Structure <a class="header-anchor" href="#after-cliproxyapi-structure" aria-label="Permalink to &quot;After: cliproxyapi++ Structure&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cliproxyapi++/</span></span>
<span class="line"><span>├── pkg/llmproxy/         # PUBLIC LIBRARY (IMPORTABLE)</span></span>
<span class="line"><span>│   ├── translator/       # Translation engine</span></span>
<span class="line"><span>│   ├── provider/         # Provider implementations</span></span>
<span class="line"><span>│   ├── config/           # Configuration synthesis</span></span>
<span class="line"><span>│   ├── watcher/          # Dynamic reload orchestration</span></span>
<span class="line"><span>│   └── auth/             # Auth lifecycle management</span></span>
<span class="line"><span>├── cmd/server/          # CLI entry point (uses pkg/llmproxy)</span></span>
<span class="line"><span>└── sdk/cliproxy/        # High-level embedding SDK</span></span></code></pre></div><h2 id="core-components" tabindex="-1">Core Components <a class="header-anchor" href="#core-components" aria-label="Permalink to &quot;Core Components&quot;">​</a></h2><h3 id="_1-translation-engine-pkg-llmproxy-translator" tabindex="-1">1. Translation Engine (<code>pkg/llmproxy/translator</code>) <a class="header-anchor" href="#_1-translation-engine-pkg-llmproxy-translator" aria-label="Permalink to &quot;1. Translation Engine (`pkg/llmproxy/translator`)&quot;">​</a></h3><p><strong>Purpose</strong>: Handles bidirectional protocol conversion between OpenAI-compatible requests and proprietary LLM APIs.</p><p><strong>Key Interfaces</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Translator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Convert OpenAI format to provider format</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    TranslateRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ChatRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Convert provider response back to OpenAI format</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    TranslateResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ChatResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Stream translation for SSE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    TranslateStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Reader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-chan</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ChatChunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Provider-specific capabilities</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SupportsStreaming</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SupportsFunctions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    MaxTokens</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Implemented Translators</strong>:</p><ul><li><code>claude.go</code> - Anthropic Claude API</li><li><code>gemini.go</code> - Google Gemini API</li><li><code>openai.go</code> - OpenAI GPT API</li><li><code>kiro.go</code> - AWS CodeWhisperer (custom protocol)</li><li><code>copilot.go</code> - GitHub Copilot (custom protocol)</li><li><code>aggregators.go</code> - OpenRouter, Together, Fireworks</li></ul><p><strong>Translation Strategy</strong>:</p><ol><li><p><strong>Request Normalization</strong>: Parse OpenAI-format request, extract:</p><ul><li>Messages (system, user, assistant)</li><li>Tools/functions</li><li>Generation parameters (temp, top_p, max_tokens)</li><li>Streaming flag</li></ul></li><li><p><strong>Provider Mapping</strong>: Map OpenAI models to provider endpoints:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>claude-3-5-sonnet -&gt; claude-3-5-sonnet-20241022 (Anthropic)</span></span>
<span class="line"><span>gpt-4 -&gt; gpt-4-turbo-preview (OpenAI)</span></span>
<span class="line"><span>gemini-1.5-pro -&gt; gemini-1.5-pro-preview-0514 (Gemini)</span></span></code></pre></div></li><li><p><strong>Response Normalization</strong>: Convert provider responses to OpenAI format:</p><ul><li>Standardize usage statistics (prompt_tokens, completion_tokens)</li><li>Normalize finish reasons (stop, length, content_filter)</li><li>Map provider-specific error codes to OpenAI error types</li></ul></li></ol><h3 id="_2-provider-execution-pkg-llmproxy-provider" tabindex="-1">2. Provider Execution (<code>pkg/llmproxy/provider</code>) <a class="header-anchor" href="#_2-provider-execution-pkg-llmproxy-provider" aria-label="Permalink to &quot;2. Provider Execution (`pkg/llmproxy/provider`)&quot;">​</a></h3><p><strong>Purpose</strong>: Orchestrates HTTP communication with LLM providers, handling authentication, retry logic, and error recovery.</p><p><strong>Key Interfaces</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProviderExecutor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Execute a single request (non-streaming)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">auth</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> coreauth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Execute streaming request</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ExecuteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">auth</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> coreauth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-chan</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderChunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Health check provider</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    HealthCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">auth</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> coreauth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Provider metadata</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    SupportsModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Executor Lifecycle</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Request -&gt; RateLimitCheck -&gt; AuthValidate -&gt; ProviderExecute -&gt;</span></span>
<span class="line"><span>    -&gt; Success -&gt; Response</span></span>
<span class="line"><span>    -&gt; RetryableError -&gt; Backoff -&gt; Retry</span></span>
<span class="line"><span>    -&gt; NonRetryableError -&gt; Error</span></span></code></pre></div><p><strong>Rate Limiting</strong>:</p><ul><li>Per-provider token bucket</li><li>Per-credential quota tracking</li><li>Intelligent cooldown on 429 responses</li></ul><h3 id="_3-configuration-management-pkg-llmproxy-config" tabindex="-1">3. Configuration Management (<code>pkg/llmproxy/config</code>) <a class="header-anchor" href="#_3-configuration-management-pkg-llmproxy-config" aria-label="Permalink to &quot;3. Configuration Management (`pkg/llmproxy/config`)&quot;">​</a></h3><p><strong>Purpose</strong>: Loads, validates, and synthesizes configuration from multiple sources.</p><p><strong>Configuration Hierarchy</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. Base config (config.yaml)</span></span>
<span class="line"><span>2. Environment overrides (CLI_PROXY_*)</span></span>
<span class="line"><span>3. Runtime synthesis (watcher merges changes)</span></span>
<span class="line"><span>4. Per-request overrides (query params)</span></span></code></pre></div><p><strong>Key Structures</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Server      </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServerConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Providers   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Auth        </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AuthConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Management  </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ManagementConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Logging     </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LoggingConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProviderConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Type        </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // &quot;claude&quot;, &quot;gemini&quot;, &quot;openai&quot;, etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Enabled     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Models      []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModelConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    AuthType    </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // &quot;api_key&quot;, &quot;oauth&quot;, &quot;device_flow&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Priority    </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // Routing priority</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Cooldown    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Duration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Hot-Reload Mechanism</strong>:</p><ul><li>File watcher on <code>config.yaml</code> and <code>auths/</code> directory</li><li>Debounced reload (500ms delay)</li><li>Atomic config swapping (no request interruption)</li><li>Validation before activation (reject invalid configs)</li></ul><h3 id="_4-watcher-synthesis-pkg-llmproxy-watcher" tabindex="-1">4. Watcher &amp; Synthesis (<code>pkg/llmproxy/watcher</code>) <a class="header-anchor" href="#_4-watcher-synthesis-pkg-llmproxy-watcher" aria-label="Permalink to &quot;4. Watcher &amp; Synthesis (`pkg/llmproxy/watcher`)&quot;">​</a></h3><p><strong>Purpose</strong>: Orchestrates dynamic configuration updates and background lifecycle management.</p><p><strong>Watcher Architecture</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Watcher</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    configPath     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    authDir        </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reloadChan     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">chan</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentConfig  </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">atomic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // *Config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentAuths   </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">atomic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // []coreauth.Auth</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Run starts the watcher goroutine</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Watcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. Initial load</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2. Watch files</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    go</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watchConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    go</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watchAuths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 3. Handle reloads</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">w.reloadChan:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Done</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Synthesis Pipeline</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Config File Changed -&gt; Parse YAML -&gt; Validate Schema -&gt;</span></span>
<span class="line"><span>    Merge with Existing -&gt; Check Conflicts -&gt; Atomic Swap</span></span></code></pre></div><p><strong>Background Workers</strong>:</p><ol><li><strong>Token Refresh Worker</strong>: Checks every 5 minutes, refreshes tokens expiring within 10 minutes</li><li><strong>Health Check Worker</strong>: Pings providers every 30 seconds, marks unhealthy providers</li><li><strong>Metrics Collector</strong>: Aggregates request latency, error rates, token usage</li></ol><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to &quot;Data Flow&quot;">​</a></h2><h3 id="request-processing-flow" tabindex="-1">Request Processing Flow <a class="header-anchor" href="#request-processing-flow" aria-label="Permalink to &quot;Request Processing Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>HTTP Request (OpenAI format)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Middleware (CORS, auth, logging)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Handler (Parse request, select provider)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Provider Executor (Rate limit check)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Translator (Convert to provider format)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>HTTP Client (Execute provider API)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Translator (Convert response)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Handler (Send response)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Middleware (Log metrics)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>HTTP Response (OpenAI format)</span></span></code></pre></div><h3 id="configuration-reload-flow" tabindex="-1">Configuration Reload Flow <a class="header-anchor" href="#configuration-reload-flow" aria-label="Permalink to &quot;Configuration Reload Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>File System Event (config.yaml changed)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Watcher (Detect change)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Debounce (500ms)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Config Loader (Parse and validate)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Synthesizer (Merge with existing)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Atomic Swap (Update runtime config)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Notification (Trigger background workers)</span></span></code></pre></div><h3 id="token-refresh-flow" tabindex="-1">Token Refresh Flow <a class="header-anchor" href="#token-refresh-flow" aria-label="Permalink to &quot;Token Refresh Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Background Worker (Every 5 min)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Scan All Auths</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Check Expiry (token.ExpiresAt &lt; now + 10min)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Execute Refresh Flow</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Update Storage (auths/{provider}.json)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Notify Watcher</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Atomic Swap (Update runtime auths)</span></span></code></pre></div><h2 id="reusability-patterns" tabindex="-1">Reusability Patterns <a class="header-anchor" href="#reusability-patterns" aria-label="Permalink to &quot;Reusability Patterns&quot;">​</a></h2><h3 id="embedding-as-library" tabindex="-1">Embedding as Library <a class="header-anchor" href="#embedding-as-library" aria-label="Permalink to &quot;Embedding as Library&quot;">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/KooshaPari/cliproxyapi-plusplus/pkg/llmproxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Create translator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">translator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llmproxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewClaudeTranslator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Translate request</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">providerReq, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> translator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TranslateRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, openaiReq)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Create executor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">executor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llmproxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewClaudeExecutor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Execute</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> executor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, auth, providerReq)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Translate response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">openaiResp, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> translator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TranslateResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, resp)</span></span></code></pre></div><h3 id="custom-provider-integration" tabindex="-1">Custom Provider Integration <a class="header-anchor" href="#custom-provider-integration" aria-label="Permalink to &quot;Custom Provider Integration&quot;">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Implement Translator interface</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomTranslator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MyCustomTranslator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TranslateRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ChatRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">llmproxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Custom translation logic</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">llmproxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProviderRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Register with executor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">executor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llmproxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewExecutor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    llmproxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithTranslator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MyCustomTranslator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="extending-configuration" tabindex="-1">Extending Configuration <a class="header-anchor" href="#extending-configuration" aria-label="Permalink to &quot;Extending Configuration&quot;">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Custom config synthesizer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySynthesizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MySynthesizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Synthesize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">llmproxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">overrides</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">llmproxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Custom merge logic</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Use in watcher</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llmproxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewWatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    llmproxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithSynthesizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MySynthesizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="performance-characteristics" tabindex="-1">Performance Characteristics <a class="header-anchor" href="#performance-characteristics" aria-label="Permalink to &quot;Performance Characteristics&quot;">​</a></h2><h3 id="memory-footprint" tabindex="-1">Memory Footprint <a class="header-anchor" href="#memory-footprint" aria-label="Permalink to &quot;Memory Footprint&quot;">​</a></h3><ul><li>Base package: ~15MB (includes all translators)</li><li>Per-request allocation: &lt;1MB</li><li>Config reload overhead: &lt;10ms</li></ul><h3 id="concurrency-model" tabindex="-1">Concurrency Model <a class="header-anchor" href="#concurrency-model" aria-label="Permalink to &quot;Concurrency Model&quot;">​</a></h3><ul><li>Request handling: Goroutine-per-request (bounded by worker pool)</li><li>Config reloading: Single goroutine (serialized)</li><li>Token refresh: Single goroutine (serialized per provider)</li><li>Health checks: Per-provider goroutines</li></ul><h3 id="throughput" tabindex="-1">Throughput <a class="header-anchor" href="#throughput" aria-label="Permalink to &quot;Throughput&quot;">​</a></h3><ul><li>Single instance: ~1000 requests/second (varies by provider)</li><li>Hot reload impact: &lt;5ms latency blip during swap</li><li>Background workers: &lt;1% CPU utilization</li></ul><h2 id="security-considerations" tabindex="-1">Security Considerations <a class="header-anchor" href="#security-considerations" aria-label="Permalink to &quot;Security Considerations&quot;">​</a></h2><h3 id="public-api-stability" tabindex="-1">Public API Stability <a class="header-anchor" href="#public-api-stability" aria-label="Permalink to &quot;Public API Stability&quot;">​</a></h3><ul><li>All exported APIs follow semantic versioning</li><li>Breaking changes require major version bump (v7, v8, etc.)</li><li>Deprecated APIs remain for 2 major versions</li></ul><h3 id="input-validation" tabindex="-1">Input Validation <a class="header-anchor" href="#input-validation" aria-label="Permalink to &quot;Input Validation&quot;">​</a></h3><ul><li>All translator inputs validated before provider execution</li><li>Config validation on load (reject malformed configs)</li><li>Auth credential validation before storage</li></ul><h3 id="error-propagation" tabindex="-1">Error Propagation <a class="header-anchor" href="#error-propagation" aria-label="Permalink to &quot;Error Propagation&quot;">​</a></h3><ul><li>Internal errors sanitized before API response</li><li>Provider errors mapped to OpenAI error types</li><li>Detailed logging for debugging (configurable verbosity)</li></ul><h2 id="migration-guide" tabindex="-1">Migration Guide <a class="header-anchor" href="#migration-guide" aria-label="Permalink to &quot;Migration Guide&quot;">​</a></h2><h3 id="from-mainline-internal" tabindex="-1">From Mainline internal/ <a class="header-anchor" href="#from-mainline-internal" aria-label="Permalink to &quot;From Mainline internal/&quot;">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Before (mainline)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/router-for-me/CLIProxyAPI/v6/internal/translator</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// After (cliproxyapi++)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/KooshaPari/cliproxyapi-plusplus/pkg/llmproxy/translator</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><h3 id="function-compatibility" tabindex="-1">Function Compatibility <a class="header-anchor" href="#function-compatibility" aria-label="Permalink to &quot;Function Compatibility&quot;">​</a></h3><p>Most internal functions have public equivalents:</p><ul><li><code>internal/translator.NewClaude()</code> → <code>llmproxy/translator.NewClaude()</code></li><li><code>internal/provider.NewExecutor()</code> → <code>llmproxy/provider.NewExecutor()</code></li><li><code>internal/config.Load()</code> → <code>llmproxy/config.LoadConfig()</code></li></ul><h2 id="testing-strategy" tabindex="-1">Testing Strategy <a class="header-anchor" href="#testing-strategy" aria-label="Permalink to &quot;Testing Strategy&quot;">​</a></h2><h3 id="unit-tests" tabindex="-1">Unit Tests <a class="header-anchor" href="#unit-tests" aria-label="Permalink to &quot;Unit Tests&quot;">​</a></h3><ul><li>Each translator: Mock provider responses</li><li>Each executor: Mock HTTP transport</li><li>Config validation: Test schema violations</li></ul><h3 id="integration-tests" tabindex="-1">Integration Tests <a class="header-anchor" href="#integration-tests" aria-label="Permalink to &quot;Integration Tests&quot;">​</a></h3><ul><li>End-to-end proxy: Real provider APIs (test keys)</li><li>Hot reload: File system changes</li><li>Token refresh: Expiring credentials</li></ul><h3 id="contract-tests" tabindex="-1">Contract Tests <a class="header-anchor" href="#contract-tests" aria-label="Permalink to &quot;Contract Tests&quot;">​</a></h3><ul><li>OpenAI API compatibility: Verify response format</li><li>Provider contract: Verify translator mapping</li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/kooshapari/cliproxyapi-plusplus/edit/main/docs/features/architecture/fragemented/SPEC.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>Last updated: <time datetime="2026-02-22T12:40:24.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Overview</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>MIT Licensed</p><p class="copyright" data-v-566314d4>Copyright © KooshaPari</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api_index.md\":\"ImrqiJgr\",\"api_management.md\":\"lGGkN-0C\",\"api_openai-compatible.md\":\"Dhu44ytv\",\"api_operations.md\":\"9Qla852d\",\"changelog.md\":\"Cc6QY3br\",\"docsets_agent_index.md\":\"CxN-_8SL\",\"docsets_agent_operating-model.md\":\"CYYY60ot\",\"docsets_developer_external_index.md\":\"B69TCsc8\",\"docsets_developer_external_integration-quickstart.md\":\"BGItAi6b\",\"docsets_developer_internal_architecture.md\":\"BwBu7YTK\",\"docsets_developer_internal_index.md\":\"C2tqXsI_\",\"docsets_index.md\":\"CU2OxJch\",\"docsets_user_index.md\":\"vyTQrykk\",\"docsets_user_quickstart.md\":\"BFPqrbuL\",\"explanation_index.md\":\"BEHIMD2E\",\"fa-latn_index.md\":\"D-x2KJWe\",\"fa_index.md\":\"CKTYSxdB\",\"feature_changes_plusplus.md\":\"Upjze_uT\",\"features_architecture_dev.md\":\"BleYaY8C\",\"features_architecture_fragemented_dev.md\":\"FClrr7kh\",\"features_architecture_fragemented_explanation.md\":\"CqMvGe1x\",\"features_architecture_fragemented_index.md\":\"BZSwbl5P\",\"features_architecture_fragemented_merged.md\":\"9Fe0IB0f\",\"features_architecture_fragemented_readme.md\":\"BaeSeE74\",\"features_architecture_fragemented_spec.md\":\"Dj96mGpc\",\"features_architecture_fragemented_user.md\":\"DiIY5f3S\",\"features_architecture_spec.md\":\"FkdurEmc\",\"features_architecture_user.md\":\"DrFQnjSR\",\"features_auth_dev.md\":\"6KaG4NWf\",\"features_auth_index.md\":\"CIWeGGHR\",\"features_auth_spec.md\":\"BWcPcd5W\",\"features_auth_user.md\":\"D-T6l7qu\",\"features_index.md\":\"CBCLnxOR\",\"features_operations_index.md\":\"1ZyZSTPT\",\"features_operations_spec.md\":\"DjgJMF_x\",\"features_operations_user.md\":\"DCjF3cjx\",\"features_providers_cpb-0782-opus-4-5-quickstart.md\":\"TBbi64Hn\",\"features_providers_cpb-0786-nano-banana-quickstart.md\":\"DSgIfjjW\",\"features_providers_fragemented_explanation.md\":\"C8Ic-hm-\",\"features_providers_fragemented_index.md\":\"CzWjP81k\",\"features_providers_fragemented_merged.md\":\"D6JUiY_n\",\"features_providers_fragemented_readme.md\":\"OrNypMgw\",\"features_providers_fragemented_spec.md\":\"YXL6s0P2\",\"features_providers_fragemented_user.md\":\"DZlqq6tE\",\"features_providers_spec.md\":\"nziW2bAK\",\"features_providers_user.md\":\"BgI_CAAo\",\"features_security_index.md\":\"txR9tRVd\",\"features_security_spec.md\":\"uSw1u2Ag\",\"features_security_user.md\":\"t3NIHGY9\",\"getting-started.md\":\"PuI7pHY9\",\"guides_changelog_entry_template.md\":\"BCmLEHv7\",\"guides_changelog_process.md\":\"D3GQPR-S\",\"guides_cpb-0701-0710-lane-e3-notes.md\":\"YXsbmv0a\",\"guides_cpb-0711-0720-lane-e4-notes.md\":\"DZ31y_fG\",\"guides_cpb-0721-0730-lane-d4-notes.md\":\"BHXHCmF_\",\"guides_cpb-0721-0730-lane-e5-notes.md\":\"Ttx_2FI0\",\"guides_project_setup_style.md\":\"Cll19vtq\",\"guides_quick-start_arm64_docker_provider_quickstart.md\":\"DfhW8tk6\",\"guides_release-batching.md\":\"CvbSAiVR\",\"how-to_index.md\":\"B6zNMS4d\",\"index.md\":\"CS04zCJ3\",\"install.md\":\"jl1-fBL5\",\"operations_auth-refresh-failure-symptom-fix.md\":\"BNffTl5J\",\"operations_checks-owner-responder-map.md\":\"C4JcFFgR\",\"operations_cpb-0783-gemini-3-pro-preview-hmr.md\":\"IMVbKucA\",\"operations_critical-endpoints-curl-pack.md\":\"BPbXRuul\",\"operations_distributed-fs-compute-status.md\":\"DPDO7Pb4\",\"operations_index.md\":\"mulfDN8D\",\"operations_kiro-idc-refresh-rollout.md\":\"BD3bRH7i\",\"operations_provider-outage-triage-quick-guide.md\":\"DL2H-TPt\",\"operations_release-governance.md\":\"BL3o7W1p\",\"operations_required-branch-check-ownership.md\":\"ByL2VfAw\",\"optimization_plan_2026-02-23.md\":\"Dk6KdPbt\",\"planning_agentapi-cliproxy-integration-research-2026-02-22.md\":\"B-06U1N3\",\"planning_board-workflow.md\":\"VnaMui1z\",\"planning_cliproxyapi_1000_item_board_2026-02-22.md\":\"DSlp_J8R\",\"planning_cliproxyapi_2000_item_execution_board_2026-02-22.md\":\"D0xvUGu3\",\"planning_coder-org-plus-relative-300-inventory-2026-02-22.md\":\"DvvIl2qT\",\"planning_coverage-gaps.md\":\"C_glORxB\",\"planning_docs_parity_p1_p2_plan_2026-02-23.md\":\"C2RDN_jr\",\"planning_index.md\":\"DTXn_2gw\",\"planning_issue-lanes-cliproxy-1000-2026-02-22.md\":\"BQy14v_o\",\"planning_issue-wave-codescan-0139-2026-02-23.md\":\"6oC46oFM\",\"planning_issue-wave-codescan-progress-2026-02-23.md\":\"BpfVFz9F\",\"planning_issue-wave-cpb-0001-0035-2026-02-22.md\":\"cytXPgg7\",\"planning_issue-wave-cpb-0036-0105-2026-02-22.md\":\"CtA7w5v_\",\"planning_issue-wave-cpb-0106-0175-2026-02-22.md\":\"BwnDAVVy\",\"planning_issue-wave-cpb-0176-0245-2026-02-22.md\":\"Ta48Sh7j\",\"planning_issue-wave-cpb-0246-0280-2026-02-22.md\":\"CD-k7yja\",\"planning_issue-wave-cpb-0281-0315-2026-02-22.md\":\"-u1qmiFk\",\"planning_issue-wave-cpb-0316-0350-2026-02-22.md\":\"CZhBsAaT\",\"planning_issue-wave-cpb-0351-0385-2026-02-22.md\":\"p0KR3l_L\",\"planning_issue-wave-cpb-0386-0420-2026-02-22.md\":\"DFol-ERm\",\"planning_issue-wave-cpb-0421-0455-2026-02-22.md\":\"CB_xFU0u\",\"planning_issue-wave-cpb-0456-0490-2026-02-22.md\":\"Ij0XRnk9\",\"planning_issue-wave-gh-35-2026-02-22.md\":\"BhNy4Jp1\",\"planning_issue-wave-gh-next21-2026-02-22.md\":\"DZJFfVyE\",\"planning_issue-wave-gh-next32-2026-02-22.md\":\"DIkXmxpU\",\"planning_readme.md\":\"BOzIPdcE\",\"planning_reports_fragemented_explanation.md\":\"CgCUuHzD\",\"planning_reports_fragemented_index.md\":\"BaweTIi6\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-1.md\":\"BaCA2Dn4\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-2.md\":\"DY5tGqIC\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-3.md\":\"BTCj0flT\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-4.md\":\"DEUUlEsl\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-5.md\":\"DHA_vryO\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-6.md\":\"HDh7asA5\",\"planning_reports_fragemented_issue-wave-cpb-0001-0035-lane-7.md\":\"DL65VYVI\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-1.md\":\"1--JMXis\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-2.md\":\"C1NEkcty\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-3.md\":\"9qaH7GY_\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-4.md\":\"DVwKtv96\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-5.md\":\"CIJ3jwoI\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-6.md\":\"633STijE\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-lane-7.md\":\"hlcrB-gZ\",\"planning_reports_fragemented_issue-wave-cpb-0036-0105-next-70-summary.md\":\"DFzY_O-F\",\"planning_reports_fragemented_issue-wave-gh-35-integration-summary-2026-02-22.md\":\"Bxq01nm4\",\"planning_reports_fragemented_issue-wave-gh-35-lane-1-self.md\":\"B_QVcMyq\",\"planning_reports_fragemented_issue-wave-gh-35-lane-1.md\":\"CVlXGf8o\",\"planning_reports_fragemented_issue-wave-gh-35-lane-2.md\":\"BrBTKj1L\",\"planning_reports_fragemented_issue-wave-gh-35-lane-3.md\":\"K_mYFfeW\",\"planning_reports_fragemented_issue-wave-gh-35-lane-4.md\":\"kTMNTfI6\",\"planning_reports_fragemented_issue-wave-gh-35-lane-5.md\":\"Qhut3FI4\",\"planning_reports_fragemented_issue-wave-gh-35-lane-6.md\":\"Nc9tQ9lP\",\"planning_reports_fragemented_issue-wave-gh-35-lane-7.md\":\"DOMMXX6r\",\"planning_reports_fragemented_merged.md\":\"CfzJZ6Ul\",\"planning_reports_fragemented_readme.md\":\"DfMtEHU8\",\"planning_reports_issue-wave-cp2k-0040-0050-lane-4-2026-02-23.md\":\"DhW5GZjA\",\"planning_reports_issue-wave-cp2k-next30-execution-summary-2026-02-23.md\":\"B3gIvzD0\",\"planning_reports_issue-wave-cp2k-next50-lane-2-2026-02-23.md\":\"CkmYfdvj\",\"planning_reports_issue-wave-cpb-0001-0035-lane-1.md\":\"Cp3Y1aHQ\",\"planning_reports_issue-wave-cpb-0001-0035-lane-2.md\":\"BmDYfEqO\",\"planning_reports_issue-wave-cpb-0001-0035-lane-3.md\":\"BIgKyIxp\",\"planning_reports_issue-wave-cpb-0001-0035-lane-4.md\":\"DrWUPi4A\",\"planning_reports_issue-wave-cpb-0001-0035-lane-5.md\":\"CUI7OxMy\",\"planning_reports_issue-wave-cpb-0001-0035-lane-6.md\":\"WIjHaO-h\",\"planning_reports_issue-wave-cpb-0001-0035-lane-7.md\":\"DDfJZp0H\",\"planning_reports_issue-wave-cpb-0036-0105-lane-1.md\":\"Bnkxfjzg\",\"planning_reports_issue-wave-cpb-0036-0105-lane-2.md\":\"jCPRg-fp\",\"planning_reports_issue-wave-cpb-0036-0105-lane-3.md\":\"CrXU1bR-\",\"planning_reports_issue-wave-cpb-0036-0105-lane-4.md\":\"CTbJxC6G\",\"planning_reports_issue-wave-cpb-0036-0105-lane-5.md\":\"DrtvrKSZ\",\"planning_reports_issue-wave-cpb-0036-0105-lane-6.md\":\"y5xfHXhM\",\"planning_reports_issue-wave-cpb-0036-0105-lane-7.md\":\"DoNtnN-F\",\"planning_reports_issue-wave-cpb-0036-0105-next-70-summary.md\":\"ZkbaBJg2\",\"planning_reports_issue-wave-cpb-0106-0175-lane-1.md\":\"BBxJ9y4y\",\"planning_reports_issue-wave-cpb-0106-0175-lane-2.md\":\"CnHehFRj\",\"planning_reports_issue-wave-cpb-0106-0175-lane-3.md\":\"CBx9LBJa\",\"planning_reports_issue-wave-cpb-0106-0175-lane-4.md\":\"pgwSsqgF\",\"planning_reports_issue-wave-cpb-0106-0175-lane-5.md\":\"QkeyKfUL\",\"planning_reports_issue-wave-cpb-0106-0175-lane-6.md\":\"xHfEiA96\",\"planning_reports_issue-wave-cpb-0106-0175-lane-7.md\":\"CjcqWjrn\",\"planning_reports_issue-wave-cpb-0106-0175-next-70-summary.md\":\"D4H_AsX4\",\"planning_reports_issue-wave-cpb-0138-0147-lane-1.md\":\"kkMP98GU\",\"planning_reports_issue-wave-cpb-0176-0245-lane-1.md\":\"bCreyPO7\",\"planning_reports_issue-wave-cpb-0176-0245-lane-2.md\":\"CUmP9Nux\",\"planning_reports_issue-wave-cpb-0176-0245-lane-3.md\":\"DvOdqrVe\",\"planning_reports_issue-wave-cpb-0176-0245-lane-4.md\":\"BV-_COVF\",\"planning_reports_issue-wave-cpb-0176-0245-lane-5.md\":\"DmMCfLyF\",\"planning_reports_issue-wave-cpb-0176-0245-lane-6.md\":\"C_jS6iez\",\"planning_reports_issue-wave-cpb-0176-0245-lane-7.md\":\"Diq-_qg8\",\"planning_reports_issue-wave-cpb-0176-0245-next-70-summary.md\":\"B-wwwLqS\",\"planning_reports_issue-wave-cpb-0246-0280-lane-1.md\":\"987gMsNB\",\"planning_reports_issue-wave-cpb-0246-0280-lane-2.md\":\"CiqwdfBK\",\"planning_reports_issue-wave-cpb-0246-0280-lane-3.md\":\"SNATAYxC\",\"planning_reports_issue-wave-cpb-0246-0280-lane-4.md\":\"BfO9yUSO\",\"planning_reports_issue-wave-cpb-0246-0280-lane-5.md\":\"d6uf1Ubc\",\"planning_reports_issue-wave-cpb-0246-0280-lane-6.md\":\"bJT_bGPi\",\"planning_reports_issue-wave-cpb-0246-0280-lane-7.md\":\"DXkDqLIH\",\"planning_reports_issue-wave-cpb-0246-0280-next-35-summary.md\":\"C23BTF6R\",\"planning_reports_issue-wave-cpb-0281-0315-lane-1.md\":\"CkpmkoC6\",\"planning_reports_issue-wave-cpb-0281-0315-lane-2.md\":\"CL8LE50h\",\"planning_reports_issue-wave-cpb-0281-0315-lane-3.md\":\"m1uri2TJ\",\"planning_reports_issue-wave-cpb-0281-0315-lane-4.md\":\"CDhi2Gt0\",\"planning_reports_issue-wave-cpb-0281-0315-lane-5.md\":\"Q9V8Pt1y\",\"planning_reports_issue-wave-cpb-0281-0315-lane-6.md\":\"DH38F4k0\",\"planning_reports_issue-wave-cpb-0281-0315-lane-7.md\":\"BnbNNy0M\",\"planning_reports_issue-wave-cpb-0281-0315-next-35-summary.md\":\"Cy5kcWX-\",\"planning_reports_issue-wave-cpb-0316-0350-lane-1.md\":\"DWkYQ3H1\",\"planning_reports_issue-wave-cpb-0316-0350-lane-2.md\":\"BzMzQdOB\",\"planning_reports_issue-wave-cpb-0316-0350-lane-3.md\":\"DgxDo7Lk\",\"planning_reports_issue-wave-cpb-0316-0350-lane-4.md\":\"BvEyJ096\",\"planning_reports_issue-wave-cpb-0316-0350-lane-5.md\":\"DfV0iijL\",\"planning_reports_issue-wave-cpb-0316-0350-lane-6.md\":\"Bsku0T-T\",\"planning_reports_issue-wave-cpb-0316-0350-lane-7.md\":\"BS3z-J5X\",\"planning_reports_issue-wave-cpb-0316-0350-next-35-summary.md\":\"CjiS80zK\",\"planning_reports_issue-wave-cpb-0327-0376-next-50-summary.md\":\"410jfk_2\",\"planning_reports_issue-wave-cpb-0351-0385-lane-1.md\":\"8RFbd2tO\",\"planning_reports_issue-wave-cpb-0351-0385-lane-2.md\":\"CUhUA8VV\",\"planning_reports_issue-wave-cpb-0351-0385-lane-3.md\":\"DCYCG9LE\",\"planning_reports_issue-wave-cpb-0351-0385-lane-4.md\":\"C5fEESOx\",\"planning_reports_issue-wave-cpb-0351-0385-lane-5.md\":\"DfA-s6Mx\",\"planning_reports_issue-wave-cpb-0351-0385-lane-6.md\":\"EgUYUHwF\",\"planning_reports_issue-wave-cpb-0351-0385-lane-7.md\":\"CtQ7ypdg\",\"planning_reports_issue-wave-cpb-0351-0385-next-35-summary.md\":\"UDHE_2hj\",\"planning_reports_issue-wave-cpb-0386-0420-lane-1.md\":\"OYzfmNfE\",\"planning_reports_issue-wave-cpb-0386-0420-lane-2.md\":\"3IPRnkwc\",\"planning_reports_issue-wave-cpb-0386-0420-lane-3.md\":\"BRc5k_5h\",\"planning_reports_issue-wave-cpb-0386-0420-lane-4.md\":\"xwLTvuIn\",\"planning_reports_issue-wave-cpb-0386-0420-lane-5.md\":\"CFEkMCVB\",\"planning_reports_issue-wave-cpb-0386-0420-lane-6.md\":\"C8PoPDJa\",\"planning_reports_issue-wave-cpb-0386-0420-lane-7.md\":\"atWmURZk\",\"planning_reports_issue-wave-cpb-0386-0420-next-35-summary.md\":\"C2ARgQ25\",\"planning_reports_issue-wave-cpb-0421-0455-lane-1.md\":\"jzg0BXrF\",\"planning_reports_issue-wave-cpb-0421-0455-lane-2.md\":\"D3QjYlSO\",\"planning_reports_issue-wave-cpb-0421-0455-lane-3.md\":\"CxvDqouL\",\"planning_reports_issue-wave-cpb-0421-0455-lane-4.md\":\"Da58bRsN\",\"planning_reports_issue-wave-cpb-0421-0455-lane-5.md\":\"CjXnkBjq\",\"planning_reports_issue-wave-cpb-0421-0455-lane-6.md\":\"CSq6llN5\",\"planning_reports_issue-wave-cpb-0421-0455-lane-7.md\":\"DEta9zTo\",\"planning_reports_issue-wave-cpb-0421-0455-next-35-summary.md\":\"DdshkDjI\",\"planning_reports_issue-wave-cpb-0456-0490-lane-1.md\":\"BhW57VVL\",\"planning_reports_issue-wave-cpb-0456-0490-lane-2.md\":\"DkOXnuCf\",\"planning_reports_issue-wave-cpb-0456-0490-lane-3.md\":\"KSVgTNmT\",\"planning_reports_issue-wave-cpb-0456-0490-lane-4.md\":\"CIM2izXS\",\"planning_reports_issue-wave-cpb-0456-0490-lane-5.md\":\"Cdes0-kt\",\"planning_reports_issue-wave-cpb-0456-0490-lane-6.md\":\"BOsCLWDM\",\"planning_reports_issue-wave-cpb-0456-0490-lane-7.md\":\"DcOgXSUc\",\"planning_reports_issue-wave-cpb-0456-0490-next-35-summary.md\":\"UgHJJK9v\",\"planning_reports_issue-wave-cpb-0491-0540-lane-1.md\":\"vEQ3xC8q\",\"planning_reports_issue-wave-cpb-0491-0540-lane-2.md\":\"Bp8RKAiq\",\"planning_reports_issue-wave-cpb-0491-0540-lane-3.md\":\"DupmSEoV\",\"planning_reports_issue-wave-cpb-0491-0540-lane-4.md\":\"BlvFGfC9\",\"planning_reports_issue-wave-cpb-0491-0540-lane-5.md\":\"BPAUSI6J\",\"planning_reports_issue-wave-cpb-0491-0540-lane-6.md\":\"XAg7Kbaw\",\"planning_reports_issue-wave-cpb-0491-0540-lane-7.md\":\"BOtIWc5I\",\"planning_reports_issue-wave-cpb-0491-0540-lane-8.md\":\"C85Dq_XV\",\"planning_reports_issue-wave-cpb-0541-0590-lane-1.md\":\"UisJnuG-\",\"planning_reports_issue-wave-cpb-0541-0590-lane-10.md\":\"DtxVQvFu\",\"planning_reports_issue-wave-cpb-0541-0590-lane-2.md\":\"i8SFguNH\",\"planning_reports_issue-wave-cpb-0541-0590-lane-3.md\":\"BigPN3CX\",\"planning_reports_issue-wave-cpb-0541-0590-lane-4.md\":\"D3LuPTk9\",\"planning_reports_issue-wave-cpb-0541-0590-lane-5.md\":\"BbmJmKar\",\"planning_reports_issue-wave-cpb-0541-0590-lane-6.md\":\"kW1gYw0q\",\"planning_reports_issue-wave-cpb-0541-0590-lane-7.md\":\"B6ibyz7N\",\"planning_reports_issue-wave-cpb-0541-0590-lane-8.md\":\"CqgVz_gC\",\"planning_reports_issue-wave-cpb-0541-0590-lane-9.md\":\"vEwHKO3T\",\"planning_reports_issue-wave-cpb-0541-0590-next-50-summary.md\":\"CwNHocVt\",\"planning_reports_issue-wave-cpb-0546-0555-lane-f-implementation-2026-02-23.md\":\"qHkbsbsI\",\"planning_reports_issue-wave-cpb-0556-0610-lane-d-implementation-2026-02-23.md\":\"CsIUkBV6\",\"planning_reports_issue-wave-cpb-0581-0590-lane-e-implementation-2026-02-23.md\":\"RoArpSmD\",\"planning_reports_issue-wave-cpb-0591-0640-lane-1.md\":\"CUei2vrs\",\"planning_reports_issue-wave-cpb-0591-0640-lane-10.md\":\"A7qkaf-w\",\"planning_reports_issue-wave-cpb-0591-0640-lane-2.md\":\"iVprr5_q\",\"planning_reports_issue-wave-cpb-0591-0640-lane-3.md\":\"B7OskrYl\",\"planning_reports_issue-wave-cpb-0591-0640-lane-4.md\":\"DDIHp0s5\",\"planning_reports_issue-wave-cpb-0591-0640-lane-5.md\":\"D4bBval6\",\"planning_reports_issue-wave-cpb-0591-0640-lane-6.md\":\"1qrTUwQ_\",\"planning_reports_issue-wave-cpb-0591-0640-lane-7.md\":\"D1Za5qQN\",\"planning_reports_issue-wave-cpb-0591-0640-lane-8.md\":\"Di4pPXat\",\"planning_reports_issue-wave-cpb-0591-0640-lane-9.md\":\"D5M8sKYB\",\"planning_reports_issue-wave-cpb-0591-0640-next-50-summary.md\":\"GfclWLN2\",\"planning_reports_issue-wave-cpb-0641-0690-lane-1.md\":\"BWjIgRJW\",\"planning_reports_issue-wave-cpb-0641-0690-lane-10.md\":\"CsadUCw0\",\"planning_reports_issue-wave-cpb-0641-0690-lane-2.md\":\"DyvTYSdP\",\"planning_reports_issue-wave-cpb-0641-0690-lane-3.md\":\"CgMw2pAu\",\"planning_reports_issue-wave-cpb-0641-0690-lane-4.md\":\"BAHF6v4B\",\"planning_reports_issue-wave-cpb-0641-0690-lane-5.md\":\"tJhXbhXA\",\"planning_reports_issue-wave-cpb-0641-0690-lane-6.md\":\"BNnXFS6h\",\"planning_reports_issue-wave-cpb-0641-0690-lane-7.md\":\"DGPhH1ti\",\"planning_reports_issue-wave-cpb-0641-0690-lane-8.md\":\"Bargda68\",\"planning_reports_issue-wave-cpb-0641-0690-lane-9.md\":\"CtXRcDrr\",\"planning_reports_issue-wave-cpb-0641-0690-next-50-summary.md\":\"DNQGhQdt\",\"planning_reports_issue-wave-cpb-0691-0700-lane-f2-implementation-2026-02-23.md\":\"7awOpRaH\",\"planning_reports_issue-wave-cpb-0701-0710-lane-e3.md\":\"C_Q9VSoO\",\"planning_reports_issue-wave-cpb-0711-0720-lane-e4.md\":\"dhztHtT_\",\"planning_reports_issue-wave-cpb-0721-0730-lane-e5.md\":\"6MmY3TpF\",\"planning_reports_issue-wave-cpb-0731-0780-lane-a.md\":\"CDg9mtRM\",\"planning_reports_issue-wave-cpb-0731-0780-lane-b.md\":\"BhLeRGoL\",\"planning_reports_issue-wave-cpb-0731-0780-lane-c.md\":\"-Q9J5hbo\",\"planning_reports_issue-wave-cpb-0731-0780-lane-d.md\":\"dP996xjD\",\"planning_reports_issue-wave-cpb-0731-0780-lane-e.md\":\"EfWrVuU7\",\"planning_reports_issue-wave-cpb-0731-0780-lane-f.md\":\"D96QriwK\",\"planning_reports_issue-wave-cpb-0731-0780-next-50-summary.md\":\"CAaGmIIR\",\"planning_reports_issue-wave-cpb-0741-0750-lane-d8.md\":\"B0-P1WCe\",\"planning_reports_issue-wave-cpb-0745-0754-lane-d7.md\":\"SwMiKzpN\",\"planning_reports_issue-wave-cpb-0781-0790-lane-d9.md\":\"wt0jgaF-\",\"planning_reports_issue-wave-cpb-0781-0830-implementation-batch-1.md\":\"BUxNw-mA\",\"planning_reports_issue-wave-cpb-0781-0830-implementation-batch-2.md\":\"CkXCV3sW\",\"planning_reports_issue-wave-cpb-0781-0830-implementation-batch-3.md\":\"jmjsPnW5\",\"planning_reports_issue-wave-cpb-0781-0830-implementation-batch-4-code.md\":\"BV5gU6XA\",\"planning_reports_issue-wave-cpb-0781-0830-lane-a.md\":\"d0IIl9Bu\",\"planning_reports_issue-wave-cpb-0781-0830-lane-b.md\":\"CTYMg8Iw\",\"planning_reports_issue-wave-cpb-0781-0830-lane-c.md\":\"BT2R7I_D\",\"planning_reports_issue-wave-cpb-0781-0830-lane-d.md\":\"XCSxbOqw\",\"planning_reports_issue-wave-cpb-0781-0830-lane-e.md\":\"Cwin3iXB\",\"planning_reports_issue-wave-cpb-0781-0830-lane-e10-implementation-2026-02-23.md\":\"BiE-Symc\",\"planning_reports_issue-wave-cpb-0781-0830-lane-f.md\":\"BPFQECLS\",\"planning_reports_issue-wave-cpb-0781-0830-next-50-summary.md\":\"DqcZypC8\",\"planning_reports_issue-wave-cpb-0784-0785-lane-d10.md\":\"xlQ1IETx\",\"planning_reports_issue-wave-cpb-0981-1000-next-20-summary.md\":\"BgU5VnNR\",\"planning_reports_issue-wave-gh-35-integration-summary-2026-02-22.md\":\"CBKk1zIk\",\"planning_reports_issue-wave-gh-35-lane-1-self.md\":\"DfhtPtl2\",\"planning_reports_issue-wave-gh-35-lane-1.md\":\"D5nErqVG\",\"planning_reports_issue-wave-gh-35-lane-2.md\":\"CcNGRvFL\",\"planning_reports_issue-wave-gh-35-lane-3.md\":\"DAQgaCKe\",\"planning_reports_issue-wave-gh-35-lane-4.md\":\"B12RFh86\",\"planning_reports_issue-wave-gh-35-lane-5.md\":\"BD8OH8gI\",\"planning_reports_issue-wave-gh-35-lane-6.md\":\"nRD_HGSO\",\"planning_reports_issue-wave-gh-35-lane-7.md\":\"DxxhBIAG\",\"planning_reports_issue-wave-gh-next20-lane-f7.md\":\"N9DAWS8Q\",\"planning_reports_issue-wave-gh-next21-lane-1.md\":\"75i6yJDq\",\"planning_reports_issue-wave-gh-next21-lane-2.md\":\"DUrM9pQd\",\"planning_reports_issue-wave-gh-next21-lane-3.md\":\"CopjXRED\",\"planning_reports_issue-wave-gh-next21-lane-4.md\":\"CjHeHuTN\",\"planning_reports_issue-wave-gh-next21-lane-5.md\":\"CqVRPNUn\",\"planning_reports_issue-wave-gh-next21-lane-6.md\":\"C438_6JP\",\"planning_reports_issue-wave-gh-next21-lane-7.md\":\"DTcmOMBk\",\"planning_reports_issue-wave-gh-next32-lane-2.md\":\"ZD5oOf3G\",\"planning_reports_issue-wave-gh-next32-lane-3.md\":\"LxHtuy60\",\"planning_reports_issue-wave-gh-next32-lane-4.md\":\"CtyGhGkg\",\"planning_reports_issue-wave-gh-next32-lane-5.md\":\"CeBXhVqs\",\"planning_reports_issue-wave-gh-next32-lane-6.md\":\"jdmIezy7\",\"planning_reports_issue-wave-gh-next32-lane-7.md\":\"DfDxztub\",\"planning_reports_issue-wave-gh-next32-merge-2026-02-23.md\":\"EHBmEKUY\",\"planning_reports_issue-wave-gh-next32-merge-wave2-2026-02-23.md\":\"BTHFS68W\",\"planning_reports_lane-b-quality-governance-doc-parity-2026-02-23.md\":\"DtLwg33o\",\"planning_reports_next-50-wave1-execution-2026-02-23.md\":\"Dt17zylC\",\"planning_reports_next-50-wave2-execution-2026-02-23.md\":\"HiNJQ0zI\",\"planning_reports_next-50-wave3-execution-2026-02-23.md\":\"bbtdXM_K\",\"planning_reports_next-50-wave4-execution-2026-02-23.md\":\"DXJp55L-\",\"planning_reports_next-50-wave5-execution-2026-02-23.md\":\"B-AVm7G2\",\"planning_reports_next-50-work-items-2026-02-23.md\":\"C6CJFBE_\",\"prd.md\":\"BMTE8K32\",\"provider-catalog.md\":\"B964qiaQ\",\"provider-operations.md\":\"D5ZF3hib\",\"provider-quickstarts.md\":\"C051m4Fo\",\"provider-usage.md\":\"CXJJ-jkb\",\"readme.md\":\"Dj28aGZX\",\"reference_changelog_entry_template.md\":\"Cj1hkkNl\",\"reference_docs_ia_contract.md\":\"BjVwUZt1\",\"reference_docs_migration_matrix.md\":\"DDc-QnaQ\",\"reports_fragemented_explanation.md\":\"CvCEqZfc\",\"reports_fragemented_index.md\":\"1rd9A5eK\",\"reports_fragemented_merged.md\":\"DhTtvTtQ\",\"reports_fragemented_open_items_validation_2026-02-22.md\":\"CDAi-pKU\",\"reports_fragemented_readme.md\":\"DDR_hWRY\",\"reports_open_items_validation_2026-02-22.md\":\"Bi1fZycI\",\"reports_open_items_validation_fork_2026-02-22.md\":\"9oz5QZyI\",\"routing-reference.md\":\"Cm1uQgdF\",\"sdk-access.md\":\"R1OmYGl1\",\"sdk-access_cn.md\":\"C4HDi2HV\",\"sdk-access_fa.md\":\"CewhlDh6\",\"sdk-advanced.md\":\"D-UkRBT3\",\"sdk-advanced_cn.md\":\"DlxV9RMB\",\"sdk-advanced_fa.md\":\"BERu-0Es\",\"sdk-usage.md\":\"CxV176R2\",\"sdk-usage_cn.md\":\"Ct_kjhJx\",\"sdk-usage_fa.md\":\"BLR81jKC\",\"sdk-watcher.md\":\"ivt7FeWG\",\"sdk-watcher_cn.md\":\"D5F7iFnL\",\"sdk-watcher_fa.md\":\"BPSSoX3E\",\"spec.md\":\"CCwohbF1\",\"start-here.md\":\"CkRxFJyh\",\"troubleshooting.md\":\"B2HQYNGa\",\"tutorials_index.md\":\"Bpo6-08b\",\"worklog.md\":\"B-uMnQEw\",\"zh-cn_index.md\":\"zP9zk4aR\",\"zh-tw_index.md\":\"ByOwnU7A\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"cliproxy++\",\"description\":\"cliproxyapi-plusplus documentation\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Start Here\",\"link\":\"/start-here\"},{\"text\":\"Tutorials\",\"link\":\"/tutorials/\"},{\"text\":\"How-to\",\"link\":\"/how-to/\"},{\"text\":\"Explanation\",\"link\":\"/explanation/\"},{\"text\":\"Getting Started\",\"link\":\"/getting-started\"},{\"text\":\"Providers\",\"link\":\"/provider-usage\"},{\"text\":\"Provider Catalog\",\"link\":\"/provider-catalog\"},{\"text\":\"Operations\",\"link\":\"/operations/\"},{\"text\":\"Reference\",\"link\":\"/routing-reference\"},{\"text\":\"API\",\"link\":\"/api/\"},{\"text\":\"Docsets\",\"link\":\"/docsets/\"}],\"sidebar\":[{\"text\":\"Guide\",\"items\":[{\"text\":\"Overview\",\"link\":\"/\"},{\"text\":\"Getting Started\",\"link\":\"/getting-started\"},{\"text\":\"Install\",\"link\":\"/install\"},{\"text\":\"Provider Usage\",\"link\":\"/provider-usage\"},{\"text\":\"Provider Catalog\",\"link\":\"/provider-catalog\"},{\"text\":\"Provider Operations\",\"link\":\"/provider-operations\"},{\"text\":\"Troubleshooting\",\"link\":\"/troubleshooting\"},{\"text\":\"Planning Boards\",\"link\":\"/planning/\"}]},{\"text\":\"Reference\",\"items\":[{\"text\":\"Routing and Models\",\"link\":\"/routing-reference\"},{\"text\":\"Feature Guides\",\"link\":\"/features/\"},{\"text\":\"Docsets\",\"link\":\"/docsets/\"}]},{\"text\":\"API\",\"items\":[{\"text\":\"API Index\",\"link\":\"/api/\"},{\"text\":\"OpenAI-Compatible API\",\"link\":\"/api/openai-compatible\"},{\"text\":\"Management API\",\"link\":\"/api/management\"},{\"text\":\"Operations API\",\"link\":\"/api/operations\"}]}],\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"MIT Licensed\",\"copyright\":\"Copyright © KooshaPari\"},\"editLink\":{\"pattern\":\"https://github.com/kooshapari/cliproxyapi-plusplus/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"outline\":{\"level\":[2,3]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/kooshapari/cliproxyapi-plusplus\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>